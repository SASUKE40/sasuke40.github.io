[{"content":"æ€»æ‰€å‘¨çŸ¥å­¦ä¹  Java é€ƒä¸å¼€å¯¹å„ç±»è®¾è®¡æ¨¡å¼çš„ç†è§£è¿ç”¨ã€‚ä»Šå¤©åƒé‡Œå†°å°ä»‹ç»äº†ä¸€ä¸ªå…¨æ–°çš„è®¾è®¡æ¨¡å¼â€”â€”\u0026ldquo;Tagless Final\u0026rdquo; Style, å®ƒå¯ä»¥ç”¨ trait åœ¨ Rust ä¸­æ¨¡æ‹Ÿå­ç±»å‹ã€‚\nç¬¬ä¸€æ­¥å®ç°ç›®æ ‡ å®ç°ä¸€ä¸ª expr èŒƒå‹æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®ç±»å‹æ‰§è¡Œã€‚å¦‚ä¸‹æ–¹ä»£ç ï¼Œå¯ä»¥å·² u32 æˆ–è€… String çš„ç±»å‹è¿”å›\nfn main() { fn expr\u0026lt;T: Expr\u0026gt;() -\u0026gt; T { Expr::add( Expr::div(Expr::lit(100), Expr::lit(10)), Expr::sub(Expr::lit(223), Expr::lit(23)), ) } println!(\u0026#34;{}\u0026#34;, expr::\u0026lt;u32\u0026gt;()); println!(\u0026#34;{}\u0026#34;, expr::\u0026lt;String\u0026gt;()); } output:\n/Users/edward/.cargo/bin/cargo run --color=always --package tagless --bin tagless Compiling tagless v0.1.0 (/Users/edward/github/SASUKE40/tagless) Finished dev [unoptimized + debuginfo] target(s) in 0.39s Running `target/debug/tagless` 210 ((100 / 10) + (223 - 23)) åŸºç¡€çš„ Expr trait å®šä¹‰ è¿™ä¸ªæœ€åŸºç¡€çš„ trait æ˜¯å¤–éƒ¨å¼•å…¥ï¼Œä¸èƒ½æ›´æ”¹çš„ã€‚\npub(crate) trait Expr { fn lit(i: u32) -\u0026gt; Self; fn add(lhs: Self, rhs: Self) -\u0026gt; Self; fn sub(lhs: Self, rhs: Self) -\u0026gt; Self; fn mul(lhs: Self, rhs: Self) -\u0026gt; Self; fn div(lhs: Self, rhs: Self) -\u0026gt; Self; } å®ç° String å’Œ u32 çš„ impl impl Expr for u32 { fn lit(i: u32) -\u0026gt; Self { i } fn add(lhs: Self, rhs: Self) -\u0026gt; Self { lhs + rhs } fn sub(lhs: Self, rhs: Self) -\u0026gt; Self { lhs - rhs } fn mul(lhs: Self, rhs: Self) -\u0026gt; Self { lhs * rhs } fn div(lhs: Self, rhs: Self) -\u0026gt; Self { lhs / rhs } } impl Expr for String { fn lit(i: u32) -\u0026gt; Self { i.to_string() } fn add(lhs: Self, rhs: Self) -\u0026gt; Self { format!(\u0026#34;({} + {})\u0026#34;, lhs, rhs) } fn sub(lhs: Self, rhs: Self) -\u0026gt; Self { format!(\u0026#34;({} - {})\u0026#34;, lhs, rhs) } fn mul(lhs: Self, rhs: Self) -\u0026gt; Self { format!(\u0026#34;({} * {})\u0026#34;, lhs, rhs) } fn div(lhs: Self, rhs: Self) -\u0026gt; Self { format!(\u0026#34;({} / {})\u0026#34;, lhs, rhs) } } ä»¥ä¸Šçš„å†…å®¹éƒ½å•ç‹¬æŠ½å‡ºæ”¾å…¥åˆ° expr.rs ä¸­ã€‚\nç»™ expr å¢åŠ  exp æ–¹æ³• å› ä¸º Expr trait ä¸å¯è¢«æ›´æ”¹ï¼Œæ‰€ä»¥æ–°å¢ä¸€ä¸ª trait çš„ TypeParamBounds[^https://doc.rust-lang.org/reference/items/traits.html]: Rust traits\nSyntax Trait : unsafe? trait IDENTIFIER Generics? ( : TypeParamBounds? )? WhereClause? { TraitItem* } å®šä¹‰ä¸€ä¸ªæ–°çš„ ExprWithExp traitï¼Œå¹¶å®ç° u32 å’Œ String ç±»å‹çš„ exp æ–¹æ³•ï¼š\ntrait ExprWithExp: Expr { fn exp(lhs: Self, rhs: Self) -\u0026gt; Self; } impl ExprWithExp for u32 { fn exp(lhs: Self, rhs: Self) -\u0026gt; Self { lhs.pow(rhs) } } impl ExprWithExp for String { fn exp(lhs: Self, rhs: Self) -\u0026gt; Self { format!(\u0026#34;({} ^ {})\u0026#34;, lhs, rhs) } } è¿™æ ·å°±å¯ä»¥ç»™ u32 å’Œ String æ‹“å±•å‡º exp æ–¹æ³•\nfn main() { // snippet fn expr2\u0026lt;T: ExprWithExp\u0026gt;() -\u0026gt; T { ExprWithExp::exp(expr(), Expr::lit(2)) } println!(\u0026#34;{}\u0026#34;, expr2::\u0026lt;u32\u0026gt;()); println!(\u0026#34;{}\u0026#34;, expr2::\u0026lt;String\u0026gt;()); } output:\n/Users/edward/.cargo/bin/cargo run --color=always --package tagless --bin tagless Compiling tagless v0.1.0 (/Users/edward/github/SASUKE40/tagless) Finished dev [unoptimized + debuginfo] target(s) in 0.56s Running `target/debug/tagless` 210 ((100 / 10) + (223 - 23)) 44100 (((100 / 10) + (223 - 23)) ^ 2) ","date":"2020-07-18T00:00:00Z","image":"https://edward40.com/p/tagless-final-in-rust/rust_programming_crab_sea_hu_fb43f6b6e285abb5.png","permalink":"https://edward40.com/p/tagless-final-in-rust/","title":"Tagless Final in Rust"},{"content":"å‰è¨€ æœ€è¿‘åœ¨ React Europe 2020 Conference ä¸Šï¼Œ facebook å†…éƒ¨é‡Šå‡ºä¸€ä¸ªçŠ¶æ€ç®¡ç†åº“ Recoil\né€šè¿‡å®˜æ–¹çš„å®£ä¼ ä»¥åŠåˆæ­¥çš„ä½¿ç”¨ï¼ŒRecoil åœ¨å¤„ç† shared state ä¸Šæ¯”è¾ƒæ–¹ä¾¿ï¼Œä¹Ÿèƒ½åšåˆ°æœ€å°åº¦çš„æ›´æ–°æ¥æå‡å¤æ‚ App çš„æ€§èƒ½ã€‚ä¸è¿‡æœ‰è¶£çš„æ˜¯ï¼Œå¯¹ Recoil çš„ atom selector è¿™äº› API è®¾è®¡è€Œè¨€ï¼Œå…¶å®å°±æ˜¯æ—©åœ¨ 47 å¹´æå‡ºçš„ Actor Modelï¼Œå¯è°“æ˜¯å‰ç«¯çŠ¶æ€ç®¡ç†çš„æ–‡è‰ºå¤å…´ã€‚\nActor Model éƒ¨åˆ† ä»€ä¹ˆæ˜¯ Actor Model Actor æ¨¡å‹(Actor model)é¦–å…ˆæ˜¯ç”± Carl Hewitt åœ¨ 1973 å®šä¹‰ï¼Œ ç”± Erlang OTP(Open Telecom Platform) æ¨å¹¿ï¼Œå…¶æ¶ˆæ¯ä¼ é€’æ›´åŠ ç¬¦åˆé¢å‘å¯¹è±¡çš„åŸå§‹æ„å›¾ã€‚Actors å±äºå¹¶å‘ç»„ä»¶æ¨¡å‹ï¼Œé€šè¿‡ç»„ä»¶æ–¹å¼å®šä¹‰å¹¶å‘ç¼–ç¨‹èŒƒå¼çš„é«˜çº§é˜¶æ®µï¼Œé¿å…ä½¿ç”¨è€…ç›´æ¥æ¥è§¦å¤šçº¿ç¨‹å¹¶å‘æˆ–çº¿ç¨‹æ± ç­‰åŸºç¡€æ¦‚å¿µã€‚\næµè¡Œè¯­è¨€å¹¶å‘æ˜¯åŸºäºå¤šçº¿ç¨‹ä¹‹é—´çš„å…±äº«å†…å­˜ï¼Œä½¿ç”¨åŒæ­¥æ–¹æ³•é˜²æ­¢å†™äº‰å¤ºï¼ŒActors ä½¿ç”¨æ¶ˆæ¯æ¨¡å‹ï¼Œæ¯ä¸ª Actors åœ¨åŒä¸€æ—¶é—´å¤„ç†æœ€å¤šä¸€ä¸ªæ¶ˆæ¯ï¼Œå¯ä»¥å‘é€æ¶ˆæ¯ç»™å…¶ä»– Actorsï¼Œä¿è¯äº†å•ç‹¬å†™åŸåˆ™ã€‚ä»è€Œå·§å¦™é¿å…äº†å¤šçº¿ç¨‹å†™äº‰å¤ºã€‚\nActor Model ä¸»è¦æœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š\nè½»é‡ï¼šActor æ˜¯ç³»ç»Ÿå†…çš„ä¸€ä¸ªåŸºç¡€å•ä½ï¼Œæ¯ä¸ª Actor åªè´Ÿè´£è‡ªå·±çš„å·¥ä½œ æ²¡æœ‰ Shared Stateï¼šæ¯ä¸ª Actor å„è‡ªç®¡ç†è‡ªå·±çš„ stateï¼Œè·‘åœ¨å„è‡ªçš„ thread ä¸Šï¼Œä¸å…±äº«å†…å­˜å’Œ state é€šè¿‡æ¶ˆæ¯ä¼ é€’ï¼šæ¯ä¸ª Actor æœ‰ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œç±»ä¼¼ MailBox / Queueï¼Œæ¥å—åˆ°çš„æ¶ˆæ¯ä¼šåœ¨æ­¤é˜Ÿåˆ—ç­‰å¾…ä¾æ¬¡æ‰§è¡Œ è°ä½¿ç”¨ Actor Model Erlang Akka Vert.x Actix \u0026hellip; Recoil éƒ¨åˆ† Recoil äº§ç”ŸèƒŒæ™¯ å‰ç«¯çš„åº”ç”¨è¶Šæ¥è¶Šå¤æ‚ï¼Œè¯¸å¦‚å¸¸è§çš„ Web ç›‘æ§é¢æ¿ï¼ŒåŒ…å«å„ç±»çš„æ€§èƒ½æ•°æ®ã€èŠ‚ç‚¹ä¿¡æ¯ã€åˆ†ç±»èšåˆç”¨æ¥è¿›è¡Œåº”ç”¨åˆ†æã€‚å¯ä»¥æƒ³è±¡å¾—åˆ°é¢æ¿ä¸­åŒ…å«å„ç±»çš„äº¤äº’è¡Œä¸ºï¼Œç¼–è¾‘ã€åˆ é™¤ã€æ·»åŠ ã€å°†ä¸€ä¸ªæ•°æ®æºç»‘å®šå¤šä¸ªé¢æ¿ç­‰ç­‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦å¯¹æ•°æ®æŒä¹…åŒ–ï¼Œè¿™æ ·å°±èƒ½æŠŠ url åˆ†äº«ç»™å…¶ä»–äººï¼Œå¹¶è¦ç¡®ä¿è¢«åˆ†äº«çš„äººçœ‹åˆ°çš„æ˜¯ä¸€è‡´çš„ã€‚\nå› æ­¤å¼€å‘è¿‡ç¨‹ä¸­è¦å°½é‡åšåˆ°é¡µé¢æœ€å°åŒ–æ›´æ–°è¾¾åˆ°é«˜æ€§èƒ½çš„ç›®çš„ï¼Œéœ€è¦å¯¹æ•°æ®æµçš„æ“ä½œæ›´åŠ ç²¾ç»†ã€‚\n![](Recoil at React Europe 2020 00-00-12 .jpg)\né¢å¯¹è¿™æ ·çš„æŒ‘æˆ˜ï¼Œä¸€èˆ¬ä¼šæƒ³åˆ°ç”¨ä¸€äº›çŠ¶æ€ç®¡ç†çš„å‡½æ•°æˆ–è€…åº“ï¼Œå¦‚ React å†…ç½®çš„ state ç®¡ç†ï¼Œæˆ–è€… Reduxã€‚\nRecoil æƒ³é€šè¿‡ä¸€ä¸ªä¸ä¸€æ ·çš„æ–¹å¼æ¥è§£å†³è¿™äº›é—®é¢˜ï¼Œä¸»è¦åˆ†ä¸º 3 ä¸ªæ–¹é¢ï¼š\nFlexible shared state: åœ¨ react tree ä»»æ„çš„åœ°æ–¹éƒ½èƒ½çµæ´»å…±äº« stateï¼Œå¹¶ä¿æŒé«˜æ€§èƒ½ Derived data and queries: é«˜æ•ˆå¯é åœ°æ ¹æ®å˜åŒ–çš„ state è¿›è¡Œè®¡ç®— App-wide state observation: time travel debugging, æ”¯æŒ undo, æ—¥å¿—æŒä¹…åŒ– ##Recoil ä¸»è¦è®¾è®¡\nShared state æœ‰ä¸€ä¸ªåº”ç”¨åŸºäºè¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œå°† List ä¸­æ›´æ–°ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç„¶åå¯¹åº” Canvas ä¸­çš„èŠ‚ç‚¹ä¹Ÿæ›´æ–°\n![](Recoil at React Europe 2020 00-04-55 .png)\nç¬¬ 1 ç§æ–¹å¼ æŠŠ state ä¼ åˆ°å…¬å…±çš„çˆ¶èŠ‚ç‚¹è½¬å‘ç»™ canvas å­èŠ‚ç‚¹ï¼Œè¿™æ ·æ˜¾ç„¶ä¼šå…¨é‡ re-render\nç¬¬ 2 ç§æ–¹å¼ ç»™çˆ¶èŠ‚ç‚¹åŠ  Provider åœ¨å­èŠ‚ç‚¹åŠ  Consumerï¼Œä¸è¿‡æ¯å¤šåŠ ä¸€ä¸ª item å°±è¦å¤šä¸€å±‚ Provider\n![](Recoil at React Europe 2020 00-06-43 .png)\nç¬¬ 3 ç§æ–¹å¼ åœ¨ react tree ä¸Šåˆ›å»ºå¦ä¸€ä¸ªæ­£äº¤çš„ treeï¼ŒæŠŠæ¯ç‰‡ item çš„ state æŠ½å‡ºæ¥ã€‚æ¯ä¸ª component éƒ½æœ‰å¯¹åº”å•ç‹¬çš„ä¸€ç‰‡ stateï¼Œå½“æ•°æ®æ›´æ–°çš„æ—¶å€™å¯¹åº”çš„ç»„ä»¶ä¹Ÿä¼šæ›´æ–°ã€‚Recoil æŠŠ è¿™æ¯ä¸€ç‰‡çš„æ•°æ®ç§°ä¸º Atomï¼ŒAtom æ˜¯å¯è®¢é˜…å¯å˜çš„ state å•å…ƒã€‚\n![](Recoil at React Europe 2020 00-07-24 .png)\né…åˆ useRecoilState å¯ä»¥ä½¿ç”¨è¿™äº› Atomï¼Œå®è·µä¸Šå¯¹å¤šä¸ª item çš„ Atom å¯ä»¥ç”¨ memorize è¿›è¡Œä¼˜åŒ–ï¼Œå…·ä½“å¯ä»¥åœ¨å®˜æ–¹æ–‡æ¡£æŸ¥çœ‹ï¼Œè¿™é‡Œä¸èµ˜è¿°ã€‚\nDerived Data æœ‰è¿™ä¹ˆä¸€ä¸ªåœºæ™¯éœ€è¦æ ¹æ®å¤šä¸ª Item Box è®¡ç®— Bounding Box\nå¦‚æœä½ æ˜¯ Vue çš„çˆ±å¥½è€…ï¼Œä½ å¯èƒ½æƒ³åˆ°äº†è®¡ç®—å±æ€§ã€‚Derived Data ç¡®å®æœ‰ computed props çš„å‘³é“ï¼Œå…·ä½“æ€è·¯æ˜¯é€‰å–å¤šä¸ª Atom è¿›è¡Œè®¡ç®—ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„ stateã€‚å› æ­¤åœ¨ Recoil ä¸­è®¾è®¡äº† select è¿™æ ·çš„ API æ¥é€‰å–å¤šä¸ª Atom è¿›è¡Œè®¡ç®—ã€‚\n![](Recoil at React Europe 2020 00-14-53 .png)\nselect çš„è®¾è®¡å’Œ Proxy æŒºåƒçš„ï¼Œå±æ€§ä¸Šæœ‰ get è¿›è¡Œè¯»å–ï¼Œæœ‰ set è¿›è¡Œè®¾ç½®ï¼Œå‡½æ•°å†…éƒ¨åˆæœ‰ getï¼Œ set æ“ä½œ state\nimport { atom, selector, useRecoilState } from \u0026#39;recoil\u0026#39; const tempFahrenheit = atom({ key: \u0026#39;tempFahrenheit\u0026#39;, default: 32 }) const tempCelcius = selector({ key: \u0026#39;tempCelcius\u0026#39;, get: ({ get }) =\u0026gt; ((get(tempFahrenheit) - 32) * 5) / 9, set: ({ set }, newValue) =\u0026gt; set(tempFahrenheit, (newValue * 9) / 5 + 32) }) App-wide observation è¿™ä¸ªåœºæ™¯ä¸‹éœ€è¦æŠŠ url åˆ†äº«ç»™å…¶ä»–äººï¼Œåˆ«äººæ‰“å¼€ç›¸åŒçš„é“¾æ¥ä¹Ÿèƒ½çœ‹åˆ°ä¸€æ ·çš„é¡µé¢ã€‚\né‚£ä¹ˆå°±éœ€è¦ observe Atom çš„å˜æ›´ï¼ŒRecoil ä½¿ç”¨ useTransactionObservation è¿›è¡Œè®¢é˜…\nuseTransactionObservation(({atomValues,modifiedAtoms,...} =\u0026gt; {})) å¦ä¸€æ–¹é¢ï¼Œæ‰“å¼€é“¾æ¥çš„æ—¶å€™ä¹Ÿéœ€è¦å¯¹è¾“å…¥çš„æ•°æ®è¿›è¡Œæ ¡éªŒ\nconst counter = atom({ key: \u0026#39;myCounter\u0026#39;, default: 0, validator: (untrustedInput), metadata: ... }) ##Recoil åç»­\nç›®å‰ Recoil è¿˜å±äºå®éªŒé˜¶æ®µï¼Œä¸è¿‡èƒ½ç¡®å®šçš„æ˜¯ Recoil ä¼šå…¼å®¹ React Concurrent Mode\nActor Model \u0026amp; Recoil è”ç³» é€šè¿‡å‰é¢æåŠ Recoil çš„è®¾è®¡ï¼Œå¯ä»¥å‘ç°ä¸¤è€…çš„ç†å¿µæ˜¯ç›¸ä¼¼çš„ã€‚\nåœ¨å®ç°çš„ç»†èŠ‚ä¸­ Recoil ç»´æŠ¤äº†æ–°çš„é˜Ÿåˆ—ï¼Œå¹¶é€šè¿‡è®¢é˜…ã€æ´¾å‘çš„æœºåˆ¶å®Œæˆæ¶ˆæ¯çš„ä¼ é€’åŠç»„ä»¶çš„æ›´æ–°ã€‚\n// Fire or enqueue callbacks to rerender components that are subscribed to // nodes affected by the updatedNodes function fireNodeSubscriptions( store: Store, updatedNodes: $ReadOnlySet\u0026lt;NodeKey\u0026gt;, when: \u0026#39;enqueue\u0026#39; | \u0026#39;now\u0026#39; ) { /* This is called in two conditions: When an atom is set (with \u0026#39;enqueue\u0026#39;) and when an async selector resolves (with \u0026#39;now\u0026#39;). When an atom is set, we want to use the latest dependencies that may have become dependencies due to earlier changes in a batch. But if an async selector happens to resolve during a batch, it should use the currently rendered output, and then the end of the batch will trigger any further subscriptions due to new deps in the new state. */ const state = when === \u0026#39;enqueue\u0026#39; ? store.getState().nextTree ?? store.getState().currentTree : store.getState().currentTree const dependentNodes = getDownstreamNodes(state, updatedNodes) for (const key of dependentNodes) { ;(state.nodeToComponentSubscriptions.get(key) ?? []).forEach( ([debugName, cb]) =\u0026gt; { when === \u0026#39;enqueue\u0026#39; ? store.getState().queuedComponentCallbacks.push(cb) : cb(state) } ) } // Wake all suspended components so the right one(s) can try to re-render. // We need to wake up components not just when some asynchronous selector // resolved (when === \u0026#39;now\u0026#39;), but also when changing synchronous values because // they may cause a selector to change from asynchronous to synchronous, in // which case there would be no follow-up asynchronous resolution to wake us up. // TODO OPTIMIZATION Only wake up related downstream components Tracing.trace( \u0026#39;value became available, waking components\u0026#39;, Array.from(updatedNodes).join(\u0026#39;, \u0026#39;), () =\u0026gt; { const resolvers = store.getState().suspendedComponentResolvers resolvers.forEach(r =\u0026gt; r()) resolvers.clear() } ) } å…¶å® Recoil ä¸æ˜¯ Actor Model åœ¨å‰ç«¯çš„é¦–æ¬¡å®è·µï¼Œ2 å¹´å‰ PolymerLabs å°±æœ‰ actor-helpers ä»¥åŠ actor-boilerplate ç›¸å…³çš„å®è·µã€‚ä¸è¿‡åœ¨ React å¼ºå¤§çš„ç”Ÿæ€ä»¥åŠ React Hooks çš„åŠ æŒä¹‹ä¸‹ï¼Œç”¨ Sync çš„æ–¹å¼åšåˆ°å¼‚æ­¥ state ç®¡ç†å’Œå…±äº«ï¼ŒåŒæ—¶ä¿æŒäº¤äº’æµç¨‹ã€é«˜æ€§èƒ½çš„ Recoil ç®—æ˜¯è¡¥å……äº†ä¸€ä¸ªä¸é”™çš„æ–¹æ¡ˆã€‚\nè¡¥å…… Recoil åˆšåˆšé‡Šå‡ºå®éªŒç‰ˆæœ¬ï¼Œæˆ‘æƒ³æ­£å¥½å¯ä»¥åœ¨ä¸æ–­æ›´æ”¹çš„è¿‡ç¨‹ä¸­äº†è§£å‰ç«¯ Actor Model çš„å®ç°æ–¹å¼æ­¥éª¤ã€‚\nå¦å¤–ï¼Œå…¶å®ä¸å°‘äººæ‰¹è¯„å‰ç«¯çš„å‘å±•å°±æ˜¯åˆ°å¤„å€Ÿé‰´ï¼Œæ²¡æœ‰æ–°çš„äº‹ç‰©ï¼Œåƒæ˜¯ WPF å°±æœ‰å¾ˆå¤šå‰ç«¯å¯ä»¥å€Ÿé‰´çš„åœ°æ–¹ï¼ˆç¡®å®ä¹Ÿå¦‚æ­¤ï¼‰ã€‚\nä¸è¿‡åœ¨æˆ‘çœ‹æ¥ï¼Œæ”¾åˆ°ä¸€ä¸ªæ¯”è¾ƒé•¿çš„æ—¶æœŸé‡Œï¼Œå‰ç«¯æ…¢æ…¢å¸æ”¶å„ç±»åç«¯ã€å®¢æˆ·ç«¯çš„è®¾è®¡æ€æƒ³æ‰äº§ç”Ÿâ€œæ–°â€äº‹ç‰©æ˜¯å¾ˆæ­£å¸¸çš„å‘å±•è¿›ç¨‹ã€‚åŒ…æ‹¬ç»å¸¸è¢«æåˆ°çš„ Vue å’Œ React å­°ä¼˜å­°åŠ£ä¹‹äº‰ï¼ŒNode.js ä¸å ªå¤§ç”¨ç­‰ç­‰è¯é¢˜ï¼Œå…¶å®éƒ½æ˜¯å†å²å‘å±•åŠå…¶æŠ€æœ¯å®šä½æ‰€è‡´ã€‚å¯èƒ½å¯¹å…¶ä»–é¢†åŸŸçš„çœ‹æ¥æ˜¯ä¸æ–°é²œï¼Œä½†å¯¹å‰ç«¯è€Œè¨€æ˜¯è¯­è¨€å‘å±•ï¼ˆæ®‹ç–¾è€Œç¼åˆçš„ JavaScriptï¼‰ã€ç”Ÿæ€ç¹è£æ‰æœ‰å¯èƒ½ç¹è¡å‡ºè¿™äº›å¯¹å‰ç«¯è€Œè¨€çš„æ–°äº‹ç‰©ã€‚\n","date":"2020-05-16T00:00:00Z","image":"https://edward40.com/p/recoil-a-state-management-system-for-react/Recoil%20at%20React%20Europe%202020%2000-07-24%20_hu_c0ae89147db96f70.png","permalink":"https://edward40.com/p/recoil-a-state-management-system-for-react/","title":"Recoil ä¸€ä¸ªåŸºäº actor æ¨¡å‹çš„ React çŠ¶æ€ç®¡ç†åº“"},{"content":"å¼•è¨€ æœ€è¿‘ Vue 3.0 å‘å¸ƒäº† Beta ç‰ˆæœ¬ï¼Œå…¶ä¸­æœ€å¼•äººæ³¨æ„çš„å°±æ˜¯å…¶ Composition APIã€‚è€Œè¿™ä¸ªè®¾è®¡è¿‘æœŸç»å¸¸è¢«æ‹¿æ¥å’Œ React Hooks è¿›è¡Œæ¯”è¾ƒï¼Œä»¥ä¸‹æ˜¯ä¸¤ä¸ªä»£ç ç‰‡æ®µï¼š\n// React function Component(props) { const [a, setA] = useState(0) return \u0026lt;a onClick={() =\u0026gt; setA(x =\u0026gt; x + 1)}\u0026gt;{a}\u0026lt;/a\u0026gt; } // Vue 3 composition API function Component(props) { const a = ref(0) const setA = () =\u0026gt; a.value++ return \u0026lt;a onClick={setA}\u0026gt;{a}\u0026lt;/a\u0026gt; } æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸¤è€…çš„å¿ƒæ™ºæ¨¡å‹éå¸¸ä¸åŒï¼ŒReact ç¼–ç¨‹èŒƒå¼æ›´æ¥è¿‘äºçº¯å‡½æ•°ï¼ŒVue åˆ™é‡‡å–äº† Reactivity çš„æ¨¡å¼ã€‚\nReact Hooks çš„å¿ƒæ™ºè´Ÿæ‹… React Hooks æ˜¯åœ¨ 2018 å¹´ 10 æœˆ React Conf çš„æ—¶å€™æ­£å¼å‘å¹¿å¤§å¼€å‘è€…è¿›è¡Œå®£ä¼ ï¼Œåœ¨å½“æ—¶çœ‹åˆ° Dan Abramov æ¼”è®²ä»¥åŠç°åœºä½¿ç”¨ React Hooks é‡æ„ Class Component çš„æ—¶å€™ç®€ç›´æƒŠä¸ºå¤©äººï¼Œé‚£ä¸€åˆ»æˆ‘æ·±æ·±è¢« Function Programming æ‰€ç€è¿·ã€‚ ç„¶è€Œï¼Œç›´åˆ°å¦‚ä»Šä¸€å¹´åŠå¼€å‘è€…å„ç§å®è·µï¼Œå‘ç° React Hooks å¹¶æ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆç¾å¥½ã€‚ä½ ç°åœ¨å¯ä»¥åœ¨çŸ¥ä¹ã€æ˜é‡‘ç­‰å„ç±»å¹³å°ä¸Šæœå¯»åˆ°å¤§é‡çš„ã€ŠReact Hooks æœ€ä½³å®è·µã€‹ï¼Œè¿™ä¸ç¦è®©äººæ·±æ€ï¼šReact Hooks æ€ä¹ˆæ²¡é‚£ä¹ˆç¾å¥½äº†ï¼Ÿ\nReact Hooks å¼€å‘ç»å¸¸æåŠçš„ä¸€äº›é—®é¢˜æˆ‘åˆ—ä¸¾å‡ ä¸ªï¼š\næˆ‘è¯¥ä½¿ç”¨å•ä¸ª state å˜é‡è¿˜æ˜¯å¤šä¸ª state å˜é‡ï¼Ÿ deps ä¾èµ–è¿‡å¤šï¼Œå¯¼è‡´ Hooks éš¾ä»¥ç»´æŠ¤ï¼Ÿ è¯¥ä¸è¯¥ä½¿ç”¨ useMemoï¼Ÿ ç„¶ååŸºäºè¿™äº›é—®é¢˜çš„æœ€ä½³å®è·µï¼Œäººä»¬åˆæ€»ç»“å‡ºï¼š\nå°†å®Œå…¨ä¸ç›¸å…³çš„ state æ‹†åˆ†ä¸ºå¤šç»„ stateã€‚ å¦‚æœæŸäº› state æ˜¯ç›¸äº’å…³è”çš„ï¼Œæˆ–è€…éœ€è¦ä¸€èµ·å‘ç”Ÿæ”¹å˜ï¼Œå°±å¯ä»¥æŠŠå®ƒä»¬åˆå¹¶ä¸ºä¸€ç»„ stateã€‚ ä¾èµ–æ•°ç»„ä¾èµ–çš„å€¼æœ€å¥½ä¸è¦è¶…è¿‡ 3 ä¸ªï¼Œå¦åˆ™ä¼šå¯¼è‡´ä»£ç ä¼šéš¾ä»¥ç»´æŠ¤ã€‚ å¦‚æœå‘ç°ä¾èµ–æ•°ç»„ä¾èµ–çš„å€¼è¿‡å¤šï¼Œæˆ‘ä»¬åº”è¯¥é‡‡å–ä¸€äº›æ–¹æ³•æ¥å‡å°‘å®ƒã€‚ å»æ‰ä¸å¿…è¦çš„ä¾èµ–ã€‚ å°† Hook æ‹†åˆ†ä¸ºæ›´å°çš„å•å…ƒï¼Œæ¯ä¸ª Hook ä¾èµ–äºå„è‡ªçš„ä¾èµ–æ•°ç»„ã€‚ é€šè¿‡åˆå¹¶ç›¸å…³çš„ stateï¼Œå°†å¤šä¸ªä¾èµ–å€¼èšåˆä¸ºä¸€ä¸ªã€‚ é€šè¿‡ setState å›è°ƒå‡½æ•°è·å–æœ€æ–°çš„ stateï¼Œä»¥å‡å°‘å¤–éƒ¨ä¾èµ–ã€‚ é€šè¿‡ ref æ¥è¯»å–å¯å˜å˜é‡çš„å€¼ï¼Œä¸è¿‡éœ€è¦æ³¨æ„æ§åˆ¶ä¿®æ”¹å®ƒçš„é€”å¾„ã€‚ åº”è¯¥ä½¿ç”¨ useMemo çš„åœºæ™¯ï¼š ä¿æŒå¼•ç”¨ç›¸ç­‰ æˆæœ¬å¾ˆé«˜çš„è®¡ç®— æ— éœ€ä½¿ç”¨ useMemo çš„åœºæ™¯ï¼š å¦‚æœè¿”å›çš„å€¼æ˜¯åŸå§‹å€¼ï¼š string, boolean, null, undefined, number, symbolï¼ˆä¸åŒ…æ‹¬åŠ¨æ€å£°æ˜çš„ Symbolï¼‰ï¼Œä¸€èˆ¬ä¸éœ€è¦ä½¿ç”¨ useMemoã€‚ ä»…åœ¨ç»„ä»¶å†…éƒ¨ç”¨åˆ°çš„ objectã€arrayã€å‡½æ•°ç­‰ï¼ˆæ²¡æœ‰ä½œä¸º props ä¼ é€’ç»™å­ç»„ä»¶ï¼‰ï¼Œä¸”æ²¡æœ‰ç”¨åˆ°å…¶ä»– Hook çš„ä¾èµ–æ•°ç»„ä¸­ï¼Œä¸€èˆ¬ä¸éœ€è¦ä½¿ç”¨ useMemoã€‚ Hooksã€Render Props å’Œé«˜é˜¶ç»„ä»¶éƒ½æœ‰å„è‡ªçš„ä½¿ç”¨åœºæ™¯ï¼Œå…·ä½“ä½¿ç”¨å“ªä¸€ç§è¦çœ‹å®é™…æƒ…å†µã€‚ è‹¥ Hook ç±»å‹ç›¸åŒï¼Œä¸”ä¾èµ–æ•°ç»„ä¸€è‡´æ—¶ï¼Œåº”è¯¥åˆå¹¶æˆä¸€ä¸ª Hookã€‚ è‡ªå®šä¹‰ Hooks çš„è¿”å›å€¼å¯ä»¥ä½¿ç”¨ Tuple ç±»å‹ï¼Œæ›´æ˜“äºåœ¨å¤–éƒ¨é‡å‘½åã€‚å¦‚æœè¿”å›çš„å€¼è¿‡å¤šï¼Œåˆ™ä¸å»ºè®®ä½¿ç”¨ã€‚ ref ä¸è¦ç›´æ¥æš´éœ²ç»™å¤–éƒ¨ä½¿ç”¨ï¼Œè€Œæ˜¯æä¾›ä¸€ä¸ªä¿®æ”¹å€¼çš„æ–¹æ³•ã€‚ åœ¨ä½¿ç”¨ useMemo æˆ–è€… useCallback æ—¶ï¼Œå¯ä»¥å€ŸåŠ© ref æˆ–è€… setState callbackï¼Œç¡®ä¿è¿”å›çš„å‡½æ•°åªåˆ›å»ºä¸€æ¬¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡½æ•°ä¸ä¼šæ ¹æ®ä¾èµ–æ•°ç»„çš„å˜åŒ–è€ŒäºŒæ¬¡åˆ›å»ºã€‚ React Hooks ç»™äººä¸€ç§ç¾ä¸½çš„é”™è§‰ï¼ŒFunction Component å¯ä»¥éå¸¸ç®€å•ï¼Œä½†é•¿æœŸå¼€å‘ä¸‹æ‰é€æ¸æš´éœ²å‡ºå‡½æ•°å¼ç¼–ç¨‹åœ¨ JavaScript ä¸­çš„å›°å¢ƒã€‚ å¯¹è¿™ä¸ªé—®é¢˜å¤§å®¶åœ¨æ€è€ƒï¼Œè€Œ Vue 3.0 ä¹Ÿåœ¨æ€è€ƒå¦‚ä½•ä» React Hooks ä¸Šå–å…¶ç²¾åå»å…¶ç³Ÿç²•ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ Vue RFC ä¸­çœ‹åˆ°æœ€åˆçš„ Class API åˆ° Function-based Component API å–å…¶ FP çš„ç²¾åï¼Œå†åˆ°è¢«ä¿®è®¢ä¸º Composition API é‡‡ç”¨ Reactivity çš„è¿‡ç¨‹ã€‚\nè¿™ç§æ”¹å˜å’Œ JavaScript è¿™é—¨è¯­è¨€æœ¬èº«çš„ç¼–ç¨‹èŒƒå¼ç¦»ä¸å¼€ï¼Œä¸»è¦è¿˜æ˜¯å›´ç»•ä¸€ç­‰å…¬æ°‘å‡½æ•°ã€åŠ¨æ€ç±»å‹è¿™ä¸¤ç‚¹ã€‚\nVue Composition API æ˜¯å¦ç¾å¥½ Vue ä¸€ç›´è¢«äººæ‰€ç§°é“çš„å°±æ˜¯å…¶å¼€å‘ç®€ä¾¿ï¼Œè¿™ä¹Ÿæ˜¯éšå¼ä¾èµ–è·Ÿè¸ªå¸¦æ¥çš„ä¾¿åˆ©ã€‚ç„¶è€Œæˆä¹Ÿè§ä½•è´¥ä¹Ÿè§ä½•ï¼ŒVue è¯Ÿç—…çš„ä¸€ç‚¹å°±æ˜¯é—­åŒ…å¯¹è±¡çš„ä¸å¯é¢„æµ‹æ€§ï¼Œä¾‹å¦‚ thisã€‚\nåœ¨ Vue Composition API ä¸­ï¼Œæˆ‘å‘ç°å®˜æ–¹å¯¹ Ref å’Œ Reactive ç»™å‡ºäº†æœ€ä½³å®è·µã€‚å¯èƒ½è¿™é‡Œå°±æœ‰æ‰€è°“çš„å¹»ç­å­˜åœ¨ï¼Œå°±åƒå½“å¹´å¾ˆå¤šäººä¸å¬ React å®˜æ–¹æœ€ä½³å®è·µï¼Œåœ¨ componentWillMount é‡Œè·å–æ•°æ®ä¸€æ ·ã€‚\nRef vs. Reactive ç« èŠ‚ä¸­æœ‰å¦‚ä¸‹çš„å¯¹æ¯”ï¼š\n// style 1: separate variables let x = 0 let y = 0 function updatePosition(e) { x = e.pageX y = e.pageY } // --- compared to --- // style 2: single object const pos = { x: 0, y: 0 } function updatePosition(e) { pos.x = e.pageX pos.y = e.pageY } é‚£ä¹ˆä¾èµ–è·Ÿè¸ªçš„è¿·æƒ‘å°±æ­¤å¼€å§‹ï¼Œå› ä¸ºå½“ä½ å¯¹å·²ç» reactive çš„å¯¹è±¡è¿›è¡Œè§£æ„èµ‹å€¼æˆ–è€…èµ‹ç»™æ–°å€¼çš„æ—¶å€™ï¼Œä¾èµ–è·Ÿè¸ªå°±å¤±æ•ˆäº†ã€‚å®˜æ–¹å¯¹è¿™ä¸ªçš„æ€åº¦æ¯”è¾ƒæ¨¡ç³Šï¼š\nåœ¨ç°é˜¶æ®µï¼Œæˆ‘ä»¬è®¤ä¸ºåœ¨ ref vs reactive ä¸Šå®æ–½æœ€ä½³åšæ³•ä¸ºæ—¶å°šæ—©ã€‚æˆ‘ä»¬å»ºè®®æ‚¨ä»ä¸Šé¢çš„ä¸¤ä¸ªé€‰é¡¹ä¸­é€‰æ‹©ä¸æ‚¨çš„å¿ƒæ™ºæ¨¡å‹ç›¸ç¬¦çš„æ–¹å¼ã€‚æˆ‘ä»¬å°†æ”¶é›†å®å¼€å‘åœºæ™¯ä¸‹çš„ç”¨æˆ·çœŸåé¦ˆï¼Œå¹¶æœ€ç»ˆæä¾›æœ‰å…³æ­¤ä¸»é¢˜çš„æ›´æ˜ç¡®çš„æŒ‡å¯¼ã€‚\nå¯¹æ¯”ä¸¤è€… Vue Composition APIï¼šé—­åŒ…å˜é‡ã€å“åº”å¼çš„ä¾èµ–è¿½è¸ª React Hooks: çº¯å‡½æ•°ã€æ— å‰¯ä½œç”¨ å…¶å®æ²¡æœ‰å¥½åä¹‹åˆ†ï¼Œåœ¨ JavaScript è¿™ç§ç¼–ç¨‹èŒƒå¼æ¨¡æ£±ä¸¤å¯çš„è¯­è¨€ä¸­ï¼Œä½ æ—¢å¯ä»¥å†™å‡½æ•°ï¼Œä½†åˆä¸èƒ½ä¸è®©æ”¹å¼•ç”¨å˜é‡ï¼ˆåƒ cpp çš„ const\u0026amp; ä¸€èˆ¬ï¼‰ï¼Œä½ åˆå¯ä»¥é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆåƒ Java ä¸€æ ·ç–¯ç‹‚åå°„ï¼Œå’»å’»å’»ï¼‰ã€‚\nå…¶å®è¯­è¨€ã€æ¡†æ¶æ²¡æœ‰ä¼˜åŠ£ï¼Œä¸»è¦çœ‹ä½¿ç”¨çš„äººå¯¹å…¶ç†è§£åˆ°ä»€ä¹ˆç¨‹åº¦ã€‚ä½¿ç”¨ React Hooks å°±è¦å°½é‡é‡‡ç”¨ immutable å˜é‡ï¼Œé™ä½å‡½æ•°è°ƒç”¨è¿‡é¢‘å½±å“æ€§èƒ½ï¼ˆéƒ¨åˆ† React è°ƒåº¦ç­–ç•¥å…œåº•ï¼‰ï¼›ä½¿ç”¨ Vue å°±å°½é‡ä¸è¦ä¾èµ–è·Ÿè¸ªä¸¢å¤±æˆ–è€…æ»¥ç”¨ä¾èµ–è·Ÿè¸ªå¯¼è‡´è¡Œä¸ºä¸å¯é¢„æµ‹ã€‚\næœ€å React å’Œ Vue æ²¡æœ‰ä¸å¯è°ƒå’Œä¹‹å¤„ï¼Œä»–ä»¬æ˜¯ JavaScript è¿™é—¨è¯­è¨€ä¸€ä½“ä¸¤é¢çš„æç°ã€‚\næœªæ¥å“ªä¸ªç¤¾åŒºæ›´åŠ ç¹è£è¿˜æ˜¯è¦çœ‹ TC39 æŠŠ JavaScript å¸¦å‘ä½•æ–¹ï¼Œæ˜¯æ›´åŠ  Functional Programming å‘¢ï¼Ÿè¿˜æ˜¯æ›´åŠ  Imperative Programming å‘¢ï¼Ÿ\n","date":"2020-05-10T00:00:00Z","image":"https://edward40.com/p/compare-vue-composition-api-with-react-hooks/vue_hu_f5f97ecc3ac07b19.jpg","permalink":"https://edward40.com/p/compare-vue-composition-api-with-react-hooks/","title":"å¯¹æ¯” Vue Composition API å’Œ React Hooks"},{"content":" è‡ªæˆ‘æ¨ç¿»è‡ªæˆ‘é‡å»ºï¼Œæˆ‘è§‰å¾—æ˜¯æ´»ç€çš„äººè¯¥åšçš„äº‹æƒ…ã€‚\nä¸€ä¸ªäººè¦æ˜¯å¯¹è¿™ä¸ªä¸–ç•Œå¤±å»å¥½å¥‡å¿ƒï¼Œå¤±å»æ±‚çŸ¥æ¬²ï¼Œè¿™ä¸ªäººå·²ç»æ˜¯æ­»çš„äº†ã€‚\nâ€”â€” æ‘˜è‡ª Zeke\n2019 å¹´ï¼Œæˆ‘ä»æ­å·é˜¿é‡Œæ¥åˆ°æ·±åœ³è…¾è®¯å·¥ä½œçš„ä¸€å¹´ï¼Œè¿™ä¸€å¹´å……æ»¡äº†æ„Ÿæ©ã€è¿·èŒ«ã€æ€è€ƒã€è½¬å˜ã€‚\nç”Ÿæ´» åœ¨æœ‹å‹çš„å¸®åŠ©ä¸‹ï¼Œæˆ‘é¡ºåˆ©çš„åœ¨æ·±åœ³å®‰é¡¿ä¸‹æ¥ï¼Œå¾ˆæ„Ÿè°¢ä»–ã€‚\nå¹´å¤´çš„æ—¶å€™å»å¹¿å·å‚åŠ åŒå­¦çš„å©šç¤¼ï¼Œæ„Ÿè§‰æ—¶é—´è¿‡å¾—å¥½å¿«ã€‚\nç„¶åè¿˜å’Œç»å¸¸ä¸€èµ·ç©åƒé¸¡ã€CSGOã€å½©å…­çš„ç½‘å‹è§äº†ä¸€é¢ï¼Œä¸€èµ·åƒé¥­ã€ç©è€ã€‚ä¸è¿‡åé¢å¤§å®¶è¿˜æ˜¯å¤©å—åœ°åŒ—ï¼Œå¾ˆå¤šå›å»å­¦æ ¡äº†ï¼ŒçœŸå¸Œæœ›æœ‰ç¼˜èƒ½å†èšä¸€æ¬¡ã€‚\nå›½åº†çš„æ—¶å€™å’Œå®¶äººä¸€èµ·å»æ¾³é—¨ç©ï¼Œçœ‹äº†å¤§ä¸‰å·´ç‰ŒåŠã€‚\nåœ¨ç æµ·é•¿éš†æµ·æ´‹ç‹å›½çœ‹åŠ¨ç‰©ï¼Œå¤§å®¶éƒ½å¾ˆå–œæ¬¢æµ·è±¹å‘¢ã€‚\nå…¶å®æˆ‘ä¸æ˜¯ä¸ªå–œæ¬¢å’Œå®¶äººæ‰“ç”µè¯çš„äººï¼Œä½†å†…å¿ƒå®¶äººå¯¹æˆ‘æ¥è¯´éå¸¸çš„é‡è¦ã€‚åŒæ—¶æˆ‘ä¹Ÿæ„Ÿæ©æœ‰ä¸€ä¸ªæ™ºæ…§çš„å¦ˆå¦ˆï¼Œå¥¹çˆ±é˜…è¯»ã€çˆ±æ€è€ƒï¼Œæ•™ä¼šæˆ‘å¦‚ä½•å¾…äººæ¥ç‰©ã€ä¸ºäººå¤„äº‹ã€‚\næˆ‘ä¹ŸåŠªåŠ›æ²‰ä¸‹å¿ƒæ¥ä¹Ÿè¯»äº†ä¸€äº›ä¹¦ï¼Œå¦‚ï¼š ã€Šæ—§åˆ¶åº¦ä¸å¤§é©å‘½ã€‹ã€Š1984ã€‹ã€Šå­¦ä¼šæé—®ï¼šæ‰¹åˆ¤æ€§æ€ç»´æŒ‡å—ã€‹ç­‰ç­‰ï¼Œæ¸æ¸ä¹Ÿèƒ½æ”¶è·é˜…è¯»çš„ä¹è¶£ã€‚\nçœ‹è¿‡çš„é¢‘é“ å¦ˆå’ªè¯´ Mommy Talk\nåœ¨ B ç«™ä¸Šçœ‹ï¼Œä¸»è¦æ˜¯ç§‘æ™®å¤©æ–‡ã€æ•°å­¦ã€ç‰©ç†ä¹‹ç±»çš„ï¼Œæœ€è¿‘è®²æ··æ²Œéå¸¸æœ‰æ„æ€ã€‚\n3Blue1Brown\nYoutube ä¸Šçœ‹çš„ï¼ŒGrant Sanderson ä»ç‹¬ç‰¹çš„è§†è§‰è§’åº¦è§£è¯´é«˜ç­‰æ•°å­¦ï¼Œä¹Ÿéå¸¸æ“…é•¿å¼€å‘ï¼Œç”¨å¯è§†åŒ–æ¥è®©äººå¿«é€Ÿç†è§£æ•°å­¦ä¹‹ç¾ã€‚\nNiceChord\nè®²ä¹ç†ä¹‹ç±»çš„ï¼Œä¸è¿‡ Wiwi å®˜å¤§ä¸ºå¥½åƒæ˜¯ä¸ªæŠ€æœ¯å®…ï¼Œä¹Ÿç»å¸¸ä¼šæ”¾ä¸€äº›éŸ³ä¹ç¼–ç¨‹çš„è§†é¢‘ã€‚\nçœ‹è¿‡çš„ç”µè§†å‰§ ã€Šè‡´å‘½å¥³äººã€‹ï¼šå¥½çœ‹ ã€ŠæƒåŠ›çš„æ¸¸æˆã€‹ï¼šçƒ‚å°¾ ã€ŠYears and Yearsã€‹ï¼šå™±å¤´æ¯”è¾ƒå¤§ ã€Šåˆ‡å°”è¯ºè´åˆ©ã€‹ ã€Šæ€§çˆ±è‡ªä¿®å®¤ã€‹ çœ‹è¿‡çš„ç•ªå‰§ ã€Šè¿›å‡»çš„å·¨äºº ç¬¬ä¸‰å­£ã€‹ï¼šå¼ºçƒˆæ¨è ã€Šçº¦å®šçš„æ¢¦å¹»å²›ã€‹ ã€Šæµæ±—å§ï¼å¥èº«å°‘å¥³ã€‹ ã€ŠDr. STONE çŸ³çºªå…ƒã€‹ ã€Šåˆ€å‰‘ç¥åŸŸ Alicization ç¯‡ã€‹ æŠ€èƒ½ å¥èº« ğŸ’ª\nåšæŒäº†å‡ ä¸ªæœˆï¼Œå’ŒåŒäº‹ä¸€èµ·å»çš„ï¼Œä½†åæ¥å¥èº«æˆ¿æ”¹é€ å°±æ²¡å»ï¼ˆå…¶å®ä¹Ÿæ˜¯æ‡’æƒ°çš„ç†ç”±ï¼‰\né’¢ç´ ğŸ¹\nå…¶å®æœ‰ç‚¹è’åºŸè¿™ä¸ªå¤©èµ‹ï¼Œå¸Œæœ› 2020 èƒ½åšæŒä¸‹æ¥\nç…®é¥­ ğŸ³\nä¹°äº†ä¸€å¥—å¨å…·ï¼Œä¸è¿‡æ²¡æ€ä¹ˆç”¨ï¼Œæœç„¶è¿˜æ˜¯ä¸å–œæ¬¢çƒ§èœ\nå‚ä¸åˆ†äº« 6 æœˆçš„æ—¶å€™ï¼Œå‚åŠ  GIAC ä½œä¸ºè®²å¸ˆåˆ†äº« æ€è€ƒ å…¶å®è¿‡å»çš„ä¸€å¹´æˆ‘ç”Ÿæ´»åœ¨ææ…Œä¹‹ä¸­ï¼Œæˆ‘å‘ç°ä¸ªäººçš„æˆé•¿å‡ ä¹åœæ»ä¸å‰ã€‚\næˆ‘å¼€å§‹åæ€è‡ªå·±ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ\nç„¶åæˆ‘å‘ç°äº†å…¶å®æˆ‘æ˜¯ç”¨å·¥ä½œéº»ç—¹è‡ªå·±ï¼Œä¸è‚¯ç›´é¢ 2018 çš„è¿‡å»ï¼Œå¤±å»äº†å¯¹è‡ªå·±å¯¹æœªæ¥çš„ä¿¡å¿ƒã€‚å…¶å®è¿™å¹¶ä¸èƒ½å®Œå…¨å½’å’äºè‡ªå·±ï¼Œä¸è¿‡æ²‰è¿·ä¸æ‚Ÿå§‹ç»ˆä¸æ˜¯åŠæ³•ã€‚\nè¿™é‡Œè¦æ„Ÿè°¢ Zekeï¼Œåœ¨å’Œä»–èŠå¤©è¿‡ç¨‹ä¸­æˆ‘æ‰¾åˆ°äº†æ–¹å‘ï¼šæˆ‘éœ€è¦çš„æ˜¯è‡ªæˆ‘æ¨ç¿»è‡ªæˆ‘é‡å»ºï¼Œä¿æŒæ±‚çŸ¥æ¬²ã€å¥½å¥‡å¿ƒã€‚\nå±•æœ› 2020 å¹´æˆ‘å¼€å§‹æ‘ˆå¼ƒéº»ç—¹ï¼Œä¸ç®¡å¤šå›°éš¾éƒ½è¦ç¦»å¼€èˆ’é€‚åœˆã€‚\nä¹Ÿç»™è‡ªå·±å®šä¸‹äº†ä¸€ä¸ªç›®æ ‡ï¼šã€Œè®©è‡ªå·±æˆä¸ºæœ‰å½±å“åŠ›çš„äººã€\n","date":"2020-01-07T00:00:00Z","image":"https://edward40.com/p/review-2019/1_hu_151fc517f8bb8a29.jpeg","permalink":"https://edward40.com/p/review-2019/","title":"2019 å¹´å›é¡¾æ€»ç»“"},{"content":"å‰è¨€ ç›¸ä¿¡å¤§éƒ¨åˆ†ç¨‹åºå‘˜éƒ½æœ‰è‡ªå·±ä¸ªäººç½‘ç«™ï¼Œæˆ–è€…æ˜¯æ‰˜ç®¡åœ¨å„å¤§å¹³å°ä¸Šçš„æŠ€æœ¯åšå®¢ã€‚\nå¤§æ¦‚åœ¨å¤§ä¸€çš„æ—¶å€™æˆ‘ä¹ŸèŒç”Ÿæ­å»ºä¸ªäººåšå®¢çš„æƒ³æ³•ï¼Œæœ€æ—©è¿˜æ˜¯æ¯”è¾ƒæµè¡Œè‡ªå·±ä¹°ä¸€ä¸ª VPSã€åŸŸåï¼Œç„¶åæ­å»º WordPressã€‚ä¸è¿‡ç”±äºæ²¡ç»­è´¹ï¼Œä¸œè¥¿ä¹Ÿæ²¡å¦¥å–„å¤‡ä»½ä¹Ÿä¸çŸ¥é“å»å“ªé‡Œäº†ã€‚ æ¥ç€ç½‘ç»œå…´èµ·è½»åšå®¢ï¼Œæˆ‘æƒ³ç€è‡ªå·±å¡”å¤šä¸æ–¹ä¾¿ï¼Œå°±ç”¨äº†ç‚¹ç‚¹ç½‘å†™è‡ªå·±çš„åšå®¢ï¼Œåœ¨ä¸Šé¢æ²‰æ·€ä¸å°‘æ–‡ç« ï¼Œç„¶è€Œç‚¹ç‚¹ç½‘åœ¨ 2016 å¹´ä¹Ÿå…³é—­äº†ã€‚\nè‡ªå»ºå’Œåšå®¢å¹³å°éƒ½ä¸é è°±ï¼Œæˆ‘ä¾¿è½¬å‘äº† GitHub Pagesï¼Œæ­£å¥½é‚£ä¸€é˜µæµè¡Œç”¨ hexo ç”Ÿæˆé™æ€åšå®¢ç«™ç‚¹ï¼Œäºæ˜¯å°±æ­å»ºäº†ä¸€ä¸ªæ”¾äº†äº›æ–‡ç« ã€‚å…¶å®æ”¾åˆ°ç°åœ¨æ¥çœ‹ä¸»é¢˜è¿˜æ˜¯æŒºå¥½çœ‹çš„ï¼Œä¸è¿‡ç”±äºæˆ‘æ²¡æœ‰å¤‡ä»½çš„è‰¯å¥½ä¹ æƒ¯ï¼Œæœ‰å‡ ç¯‡æ–‡ç« çš„ md æ–‡ä»¶è¢«æˆ‘å¼„ä¸¢äº†ã€‚\nå› æ­¤ï¼Œè¿™æ¬¡æˆ‘æŠŠæ•´ä¸ªç«™ç‚¹å¤‡ä»½äº†ä¸€ä¸‹ï¼ˆå­¦ä¹–äº†ï¼‰ï¼Œå¹¶åœ¨ä¸Šé¢ç›–æ–°çš„ä¸ªäººç½‘ç«™ã€‚å› ä¸ºæ¯”è¾ƒç†Ÿæ‚‰ React çš„ç¼˜æ•…ï¼Œè¿™æ¬¡ç”¨çš„æ˜¯ Gatsby è¿›è¡Œæ­å»ºã€‚\nå‡†å¤‡å·¥ä½œ å®‰è£… Gatsby CLI npm install -g gatsby-cli åˆ›å»ºé¡¹ç›® gatsby new ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š\n. â”œâ”€â”€ LICENSE â”œâ”€â”€ README.md â”œâ”€â”€ content â”œâ”€â”€ gatsby-browser.js â”œâ”€â”€ gatsby-config.js â”œâ”€â”€ gatsby-node.js â”œâ”€â”€ node_modules â”œâ”€â”€ package-lock.json â”œâ”€â”€ package.json â”œâ”€â”€ src â””â”€â”€ static æœ¬åœ°å¼€å‘ gatsby develop å¸¸ç”¨çš„æ’ä»¶ \u0026#34;gatsby-plugin-feed\u0026#34;: \u0026#34;^2.3.25\u0026#34;, \u0026#34;gatsby-plugin-google-analytics\u0026#34;: \u0026#34;^2.1.31\u0026#34;, \u0026#34;gatsby-plugin-manifest\u0026#34;: \u0026#34;^2.2.34\u0026#34;, \u0026#34;gatsby-plugin-offline\u0026#34;: \u0026#34;^3.0.30\u0026#34;, \u0026#34;gatsby-plugin-react-helmet\u0026#34;: \u0026#34;^3.1.18\u0026#34;, \u0026#34;gatsby-plugin-sharp\u0026#34;: \u0026#34;^2.3.10\u0026#34;, \u0026#34;gatsby-plugin-typography\u0026#34;: \u0026#34;^2.3.20\u0026#34;, \u0026#34;gatsby-remark-copy-linked-files\u0026#34;: \u0026#34;^2.1.33\u0026#34;, \u0026#34;gatsby-remark-images\u0026#34;: \u0026#34;^3.1.39\u0026#34;, \u0026#34;gatsby-remark-prismjs\u0026#34;: \u0026#34;^3.3.28\u0026#34;, \u0026#34;gatsby-remark-responsive-iframe\u0026#34;: \u0026#34;^2.2.30\u0026#34;, \u0026#34;gatsby-remark-smartypants\u0026#34;: \u0026#34;^2.1.19\u0026#34;, \u0026#34;gatsby-source-filesystem\u0026#34;: \u0026#34;^2.1.43\u0026#34;, \u0026#34;gatsby-transformer-remark\u0026#34;: \u0026#34;^2.6.45\u0026#34;, \u0026#34;gatsby-transformer-sharp\u0026#34;: \u0026#34;^2.3.9\u0026#34;, é…ç½®åŠå¼€å‘ é…ç½® é¦–å…ˆæœ€é‡è¦çš„å°±æ˜¯ gatsby-config.js æ–‡ä»¶äº†ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é‡Œé¢å¯ç”¨ä¸Šè¿°å®‰è£…çš„æ’ä»¶ï¼Œé…ç½®å¯ä»¥åˆ° sasuke40.githu.io æŸ¥çœ‹ã€‚\nè¿˜æœ‰å¾—å» google analytics é…ç½®ä¸€ä¸‹è®°å½•ç«™ç‚¹çš„è®¿é—®ä¿¡æ¯ã€‚ é…ç½®ç»“æŸä¼šç»™ä½ ä¸ªè·Ÿè¸ª IDï¼Œåœ¨é…ç½®æ–‡ä»¶ gatsby-plugin-google-analytics ä¸‹ä¿®æ”¹å°±è¡Œã€‚\nå¼€å‘ Dark Mode å…¶å®ä¸Šé¢é…ç½®å®ŒæˆåŸºæœ¬ä¸Šç«™ç‚¹å°±èƒ½ç”¨äº†ï¼Œä¸è¿‡ Gatsby æœ€å¥½ç©çš„æ˜¯ä»–çš„çµæ´»ã€‚è‡ªå¸¦çš„æ²¡æœ‰å¤œé—´æ¨¡å¼ï¼Œä¸‹é¢æˆ‘å¿«é€Ÿä»‹ç»ä¸€ä¸‹æ€ä¹ˆå¼€å‘ã€‚\næ³¨å…¥å…¨å±€å‡½æ•° åœ¨ src ç›®å½•ä¸‹æ–°å»º html.jsï¼Œå¼€å‘ä¸€ä¸ªç”¨äºæ§åˆ¶ä¸»é¢˜çš„å…¨å±€å‡½æ•° \u0026lt;script dangerouslySetInnerHTML={{ __html: ` (function() { window.__onThemeChange = function() {}; function setTheme(newTheme) { window.__theme = newTheme; preferredTheme = newTheme; document.body.className = newTheme; window.__onThemeChange(newTheme); } var preferredTheme; try { preferredTheme = localStorage.getItem(\u0026#39;theme\u0026#39;); } catch (err) { } window.__setPreferredTheme = function(newTheme) { setTheme(newTheme); try { localStorage.setItem(\u0026#39;theme\u0026#39;, newTheme); } catch (err) {} } var darkQuery = window.matchMedia(\u0026#39;(prefers-color-scheme: dark)\u0026#39;); darkQuery.addListener(function(e) { window.__setPreferredTheme(e.matches ? \u0026#39;dark\u0026#39; : \u0026#39;light\u0026#39;) }); setTheme(preferredTheme || (darkQuery.matches ? \u0026#39;dark\u0026#39; : \u0026#39;light\u0026#39;)); })(); ` }} /\u0026gt; å¼€å‘ Toggle ç»„ä»¶ å‡†å¤‡å¥½ä¸¤å¼  Icon å›¾ç‰‡ï¼Œç„¶åæŠŠ react-toggle é­”æ”¹ä¸€ä¸‹å°±è¡Œã€‚\nä¿®æ”¹ layout { theme != null ? ( \u0026lt;Toggle icons={{ checked: ( \u0026lt;img src={moon} width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; role=\u0026#34;presentation\u0026#34; style={{ pointerEvents: \u0026#39;none\u0026#39; }} /\u0026gt; ), unchecked: ( \u0026lt;img src={sun} width=\u0026#34;16\u0026#34; height=\u0026#34;16\u0026#34; role=\u0026#34;presentation\u0026#34; style={{ pointerEvents: \u0026#39;none\u0026#39; }} /\u0026gt; ) }} checked={theme === \u0026#39;dark\u0026#39;} onChange={e =\u0026gt; window.__setPreferredTheme(e.target.checked ? \u0026#39;dark\u0026#39; : \u0026#39;light\u0026#39;) } /\u0026gt; ) : ( \u0026lt;div style={{ height: \u0026#39;24px\u0026#39; }} /\u0026gt; ) } ç¼–å†™å…¨å±€æ ·å¼ ç¼–å†™ global.css å¹¶åœ¨ typography.js å¯¼å…¥å®ƒï¼Œä¸»è¦å·¥ä½œæ˜¯ç»™ body é…ç½® css å˜é‡ body { --pink: rgb(255, 167, 196); background-color: var(--bg); } body.light { --bg: #ffffff; --bg-secondary: rgb(249, 250, 251); --header: var(--pink); --textNormal: #222; --textTitle: #222; --textLink: #d23669; --hr: hsla(0, 0%, 0%, 0.2); --inlineCode-bg: rgba(255, 229, 100, 0.2); --inlineCode-text: #1a1a1a; --form-shadow: 0 2px 15px 0 rgba(210, 214, 220, 0.5); } body.dark { -webkit-font-smoothing: antialiased; --bg: #282c35; --bg-secondary: rgb(54, 60, 72); --header: #ffffff; --textNormal: rgba(255, 255, 255, 0.88); --textTitle: #ffffff; --textLink: var(--pink); --hr: hsla(0, 0%, 100%, 0.2); --inlineCode-bg: rgba(115, 124, 153, 0.2); --inlineCode-text: #ffee93; --form-shadow: 0 2px 15px 0 rgba(26, 26, 27, 0.637); } æœ€ç»ˆæ•ˆæœå°±æ˜¯è¿™æ · éƒ¨ç½² å®‰è£… gh-pages npm install gh-pages --save-dev é…ç½®éƒ¨ç½²è„šæœ¬ { \u0026#34;scripts\u0026#34;: { \u0026#34;deploy\u0026#34;: \u0026#34;gatsby build \u0026amp;\u0026amp; gh-pages -d public -b master\u0026#34; } } æ¨é€æºç åˆ° dev åˆ†æ”¯ Github Pages æœ‰ä¸ªç‰¹æ®Šçš„è§„åˆ™ï¼Œå°±æ˜¯ \u0026lt;username\u0026gt;.github.io ä¼šé»˜è®¤ä½¿ç”¨ master åˆ†æ”¯ä¸­çš„ç”Ÿäº§ä»£ç ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ gh-pages -d public -b master ä¸­æ˜¯æŒ‡å®š masterï¼Œè€Œä¸æ˜¯ gh-pagesã€‚\nå› æ­¤ï¼Œæºç å°±éœ€è¦æ”¾åˆ°é master åˆ†æ”¯ä¸Šã€‚æˆ‘æŠŠåšå®¢çš„æºç æ¨åˆ° dev åˆ†æ”¯ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºé»˜è®¤ã€‚ æ¨é€æ„å»ºåçš„ç”Ÿäº§ä»£ç  npm run deploy æ¨é€ååº”è¯¥ç¨å¾®ç­‰ä¸€ä¸‹ï¼Œå°±å¯ä»¥è®¿é—®ä¸ªäººç½‘ç«™äº†ã€‚\næ€»ç»“ Gastby ä¼˜åŠ¿\nç›¸å½“çš„çµæ´»ï¼Œç»™ä¸ªäººç½‘ç«™å·¨å¤§çš„ä¿®æ”¹ç©ºé—´ æ”¯æŒ graphqlï¼Œæ•°æ®è°ƒç”¨æ–¹ä¾¿ ç”Ÿæ€å¼ºå¤§ï¼Œ1500+ æ•°é‡çš„æ’ä»¶åŸºæœ¬æ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚ Gastby åŠ£åŠ¿\nå› å…¶çµæ´»ï¼Œå¯¹ä¸ªäººåšå®¢çš„å‹å¥½åº¦å°±æ²¡é‚£ä¹ˆé«˜ï¼Œmd æ–‡ä»¶åŠæ–‡ä»¶å¤¹éœ€è¦è‡ªå·±å»ºç«‹ã€‚ä¸åƒ hexo å¯ä»¥ hexo new [layout] \u0026lt;title\u0026gt; è¿™ä¹ˆæ–¹ä¾¿ æ€»ä½“æ¥è¯´ï¼Œæˆ‘å¯¹ Gatsby è¿˜æŒºæ»¡æ„çš„ã€‚è¦æ˜¯å¤§å®¶æŒ–æ˜åˆ°å¥½ç©çš„æ’ä»¶ã€å¥½çœ‹çš„ä¸»é¢˜ä¹Ÿæ¬¢è¿ç•™è¨€ã€‚ æœ€åï¼Œä¹Ÿæ¬¢è¿å¤§å®¶äº’æ¢å‹é“¾ â¡ï¸Edward Elric\n","date":"2020-01-07T00:00:00Z","image":"https://edward40.com/p/a-guide-to-building-a-personal-website-with-gatsby/gatsby_hu_2a2cc1ca622d4e61.jpg","permalink":"https://edward40.com/p/a-guide-to-building-a-personal-website-with-gatsby/","title":"ä½¿ç”¨ Gatsby æ­å»ºä¸ªäººç½‘ç«™æŒ‡å—"},{"content":"å‰è¨€ çœ‹åˆ°è¿™ç¯‡æ–‡ç« ï¼Œå¯èƒ½å¾ˆå¤šäººä¼šæœ‰ä¸ªç–‘é—®ï¼šâ€œå·²ç»æœ‰ React + TypeScript è¿™ä¹ˆå¥½çš„ç»„åˆï¼Œä¸ºä»€ä¹ˆè¿˜æƒ³ç€ä½¿ç”¨ Rust æ¥å†™å‰ç«¯é¡µé¢ï¼Œä¸æŠ˜è…¾å—ï¼Ÿâ€ é¦–å…ˆå€¼å¾—è®¨è®ºçš„ä¸€ç‚¹ï¼Œæ¥ä¸‹æ¥å‡ å¹´çš„å‰ç«¯æ–¹å‘æœ‰å“ªäº›ï¼Ÿ ä¸ªäººçš„æ„šè§ï¼Œåœ¨å…¨æ ˆé¢†åŸŸå¿…ç„¶æ˜¯ serverlessï¼Œæˆ‘åœ¨ä¸šåŠ¡å¼€å‘ä¸­å·²ç»å°åˆ°ç”œå¤´ï¼Œé«˜æ•ˆã€ç®€ä¾¿ã€å¿ƒæ™ºè´Ÿæ‹…å¾ˆä½äº†ï¼›è€Œåœ¨ Web é¢†åŸŸï¼Œç”±äº 2019 å¹´ 12 æœˆ 5 æ—¥â€” ä¸‡ç»´ç½‘è”ç›Ÿï¼ˆW3Cï¼‰å®£å¸ƒ WebAssembly æ ¸å¿ƒè§„èŒƒæˆä¸ºæ­£å¼æ ‡å‡†ï¼ŒWASM åŠ¿å¿…å®ƒçš„å½±å“åŠ›ä¼šé€æ­¥æå‡ã€‚ WASM çš„æ¡†æ¶ / åº“çš„é€‰æ‹©å·²ç»æ¯”è¾ƒä¸°å¯Œäº†ï¼Œå¦‚ï¼šC# + Blazorã€Go + Vuguã€Rust + Yew ç­‰ç­‰ã€‚ å¯èƒ½æœ‰äººä¼šé—®ï¼Œä¸ºä»€ä¹ˆä¸èƒ½ä½¿ç”¨ TypeScript / JavaScript æ¥ç¼–è¯‘åˆ° WASMï¼Œå½’æ ¹ç»“åº•æ˜¯å› ä¸º WASM è¦æ±‚è¯­è¨€å¿…é¡»æ˜¯é™æ€å¼ºç±»å‹ã€‚å½“ç„¶å¯ä»¥é­”æ”¹ TypeScript / JavaScript åšåˆ°è¿™ä¸€ç‚¹ï¼Œä¾‹å¦‚ AssemblyScript / TurboScript å°±æ˜¯å¦‚æ­¤åœ¨ TypeScript / JavaScript ä¸Šåšé™æ€è§„èŒƒçš„ã€‚ä¸å…¶å¦‚æ­¤é­”æ”¹ï¼Œæˆ‘ä¸ªäººè§‰å¾—å€’ä¸å¦‚å¤§å¤§æ–¹æ–¹çš„ä½¿ç”¨é™æ€å¼ºç±»å‹è¯­è¨€æ¥ç¼–è¯‘åˆ° WASMï¼Œåæ­£é­”æ”¹åä¹Ÿæ— æ³•å…±äº«åŸæœ‰çš„ç”Ÿæ€ã€‚ é‚£ä¹ˆä¸ºä»€ä¹ˆé€‰æ‹© Rust è€Œä¸æ˜¯å…¶ä»–çš„è¯¸å¦‚ Goã€C#ã€C / C++ å‘¢ï¼Ÿè¿™ä¸ªç¡®å®æ²¡æœ‰å¾ˆæœ‰è¯´æœåŠ›çš„ç†ç”±ï¼Œåªæ˜¯å‡ºäºä¸ªäººçš„æŠ€æœ¯åå¥½ï¼Œæˆ–è€…è¯´æ˜¯å—åˆ° RY ä½¿ç”¨ Rust å®ç° Deno çš„é¼“èˆå§ã€‚\nå‡†å¤‡ ç¯å¢ƒé™ˆè¿° æˆ‘ä½¿ç”¨çš„æ˜¯ macOSï¼Œå¾ˆå¤šäººè‡ªç„¶ä¼šæƒ³åˆ°ä½¿ç”¨ homebrew æ¥å®Œæˆ Rust ç¯å¢ƒ setupã€‚ä¸€å¼€å§‹æˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ï¼Œä¸è¿‡ä¼šé‡åˆ°ä¸‹é¢é—®é¢˜ï¼š\nerror[E0463]: can\u0026#39;t find crate for `std` | = note: the `wasm32-unknown-unknown` target may not be installed æœ€åè¿˜æ˜¯èµ°å®˜æ–¹æ¨èçš„æ–¹å¼è§£å†³çš„ã€‚\nRust Installation curl --proto \u0026#39;=https\u0026#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh Yew Installation cargo install wasm-pack cargo install cargo-web ä¸Šæ‰‹ ä¸€äº›è¯´æ˜ Rust æœ¬èº«å°±èƒ½å®ç°ç¼–è¯‘åˆ° WASMï¼Œä½¿ç”¨ Yew æ¡†æ¶çš„åŸå› å°±å¦‚å…¶å®˜ç½‘å®£ä¼ ï¼šåªæ˜¯ä¸ºäº†æ–¹ä¾¿å‰ç«¯ç»„ä»¶æ•´åˆï¼Œä»¥åŠå¯¹ JavaScript äº’é€šæ€§çš„è€ƒé‡ã€‚\né¡¹ç›®åˆå§‹åŒ– è¿™é‡Œä¸é‡‡ç”¨å®˜ç½‘æä¾›çš„å‚è€ƒï¼Œå› ä¸ºç¤ºä¾‹è¿‡äºç®€å•ï¼Œæœ‰äº›è„±ç¦»çœŸæ­£åº”ç”¨åœºæ™¯ã€‚ä¸‹é¢çš„æ­¥éª¤æ˜¯æˆ‘ä¸ªäººè®¤ä¸ºæ¯”è¾ƒæ¥è¿‘çœŸå®å¼€å‘çš„çŠ¶æ€ï¼Œç›¸å…³æºç æˆ‘ä¹Ÿæ”¾åˆ° GitHub ä¾›å¤§å®¶ç©è€ â¡ï¸https://github.com/SASUKE40/yew-starter\ngit clone --depth=1 https://github.com/SASUKE40/yew-starter.git \u0026lt;project_name\u0026gt; ç›®å½•ç»“æ„ . â”œâ”€â”€ Cargo.lock â”œâ”€â”€ Cargo.toml â”œâ”€â”€ LICENSE â”œâ”€â”€ README.md â”œâ”€â”€ index.html â”œâ”€â”€ index.js â”œâ”€â”€ package-lock.json â”œâ”€â”€ package.json â””â”€â”€ src â”œâ”€â”€ app.rs â””â”€â”€ lib.rs è¿™é‡Œé¢æœ€é‡è¦çš„å°±æ˜¯ Cargo.toml äº†ï¼Œå…¶ä¸­æœ€å…³é”®çš„ä¾èµ–å¦‚ä¸‹ï¼š\n[lib] crate-type = [\u0026#34;cdylib\u0026#34;] [dependencies] wasm-bindgen = \u0026#34;0.2\u0026#34; yew = \u0026#34;0.10.0\u0026#34; cdylibÂ æ˜¯ç”¨äºé…ç½®æ„å»º C interoperability(C FFI)ï¼Œwasm-bindgen ä¾èµ–æ˜¯ç”¨äº WASM æ¨¡å—å’Œ JavaScript ä¹‹é—´çš„äº¤äº’ç²˜åˆã€‚\nåŠ è½½ WASM ä»¥åŠ bind çš„è¿‡ç¨‹ mod app; use wasm_bindgen::prelude::*; #[wasm_bindgen] pub fn run_app() -\u0026gt; Result\u0026lt;(), JsValue\u0026gt; { yew::start_app::\u0026lt;app::App\u0026gt;(); Ok(()) } åœ¨éœ€è¦å¯¼å‡º Rust å‡½æ•°åˆ° JavaScript ä¸­ï¼Œåªéœ€è¦åœ¨å‡½æ•°æ–¹æ³•ä¸Šæ³¨é‡Š #[wasm_bindgen] å³å¯ï¼Œæ¥ç€åœ¨ js æ–‡ä»¶ä¸­å¯¼å…¥ä½¿ç”¨\nimport { run_app } from \u0026#39;./lib\u0026#39; run_app() æ„å»ºå¥—ä»¶ ä½¿ç”¨ Parcel æ˜¯æœ€æ–¹ä¾¿çš„ï¼Œå¼€ç®±å³ç”¨ã€‚æ—¢å¯ä»¥ç›´æ¥ import rsï¼Œä¹Ÿå¯ä»¥ import wasmã€‚ æˆ‘è¿™é‡Œç”¨äº† parcel-plugin-wasm.rs æ’ä»¶å®Œæˆ Cargo loader çš„å·¥ä½œï¼Œå’Œä¸Šè¿° import rs çš„æ–¹å¼ä¸åŒï¼š\nimport { run_app } from \u0026#39;./Cargo.toml\u0026#39; run_app() Yew ç»„ä»¶ç¼–å†™ä½“éªŒ Yew æ¡†æ¶ä½¿ç”¨ html! macro æ¥ç”Ÿæˆ HTML\nimpl Component for App { type Message = Msg; type Properties = (); fn create(_: Self::Properties, _: ComponentLink\u0026lt;Self\u0026gt;) -\u0026gt; Self { App {} } fn update(\u0026amp;mut self, _msg: Self::Message) -\u0026gt; ShouldRender { true } fn view(\u0026amp;self) -\u0026gt; Html\u0026lt;Self\u0026gt; { html! { \u0026lt;p\u0026gt;{ \u0026#34;Hello world!\u0026#34; }\u0026lt;/p\u0026gt; } } } æ¨¡æ¿ä¸­å¯ä»¥ä½¿ç”¨ html! { \u0026quot;Hello, World\u0026quot; } è¿™æ ·çš„æ–¹å¼åŒ…è£¹æ–‡æœ¬æˆ–å˜é‡ï¼Œè¿™å’Œ jsx æ¯”è¾ƒç±»ä¼¼ã€‚ äº‹ä»¶ç»‘å®šã€æ¡ä»¶ã€å¾ªç¯ä¹Ÿéƒ½æ˜¯ç±»ä¼¼çš„ï¼Œå¤§åŒå°å¼‚ï¼š\n// ç‚¹å‡»äº‹ä»¶ html!{ \u0026lt;button onclick=|_| Msg::Click\u0026gt;{ \u0026#34;Click Me!\u0026#34; }\u0026lt;/button\u0026gt; } // æ¡ä»¶æ¸²æŸ“ html! { \u0026lt;div\u0026gt; { if show_link { html! { \u0026lt;a href=\u0026#34;https://example.com\u0026#34;\u0026gt;{\u0026#34;Link\u0026#34;}\u0026lt;/a\u0026gt; } } else { html! {} } } \u0026lt;/div\u0026gt; } // è¿­ä»£æ¸²æŸ“ html! { \u0026lt;ul class=\u0026#34;item-list\u0026#34;\u0026gt; { for self.props.items.iter().map(renderItem) } \u0026lt;/ul\u0026gt; } æ•ˆæœ Navigate to https://yew-starter.netlify.com/ å®é™…ä¸Š WASM æ²¡æœ‰å¤§å®¶ç›¸ä¿¡çš„é‚£ä¹ˆâ€œä¾¿æºå°å·§â€ï¼ŒWASM åƒæ‰çš„ä½“ç§¯æœ‰ 50kbã€‚\næ€»ç»“ å…¶ä¼˜åŠ¿ï¼š\nWebAssembly åœ¨æ¡Œé¢å®¢æˆ·ç«¯ç§»æ¤åˆ° Web ä¸å¯æˆ–ç¼º ä½œä¸ºèƒ¶æ°´åŒ…å­˜åœ¨ï¼Œå¦‚æŸé¢åŒ…å§å§æœ€è¿‘å°±åœ¨å°è¯• Rust 2 WASM(CPP) 2 Node.js å…¶ç–‘ç‚¹ï¼š é«˜æ€§èƒ½ï¼Œæ„Ÿè§‰æ²¡æœ‰å¾ˆçªå‡ºåˆ°å¿…é¡»å¾—è¿™ä¹ˆåš å¯ç§»æ¤æ€§ï¼Œè¦åš Web çš„ JVMï¼Ÿ WASM çš„ç”Ÿæ€æ—¥è¶‹ä¸°å¯Œå®Œå–„ï¼Œæœªæ¥ WASM åœ¨å‰ç«¯å¿…ç„¶ä¼šå¤§æ”¾å¼‚å½©ã€‚ä¸è¿‡ä¹Ÿæ— éœ€å¤¸å¤§å…¶åœ°ä½ï¼Œå¯ä»¥å‚è€ƒ WebAssembly çš„å‡ºç°æ˜¯å¦ä¼šå–ä»£ JavaScriptï¼Ÿè¿™ä¸ªçŸ¥ä¹å›ç­”ã€‚æ‘˜æŠ„å®˜æ–¹å¯¹å…¶å®šä½çš„ä¸€ä¸ªå›ç­”ï¼šWebAssembly æ—¨åœ¨ä½œä¸º JavaScript çš„è¡¥å……è€Œä¸æ˜¯æ›¿ä»£ã€‚ é€šå®µå†™æ–‡ï¼Œæ±‚ ğŸŒŸğŸŒŸ æ±‚å…³æ³¨ï¼Œä¸èƒœæ„Ÿæ¿€ â¬‡ï¸\nhttps://github.com/SASUKE40/yew-starter\n","date":"2020-01-05T00:00:00Z","image":"https://edward40.com/p/try-writing-fe-with-rust-yew/yew_hu_fffd306f7f9c9e6f.jpg","permalink":"https://edward40.com/p/try-writing-fe-with-rust-yew/","title":"å°è¯•ç”¨ Rust + Yew å†™é«˜æ€§èƒ½å‰ç«¯é¡µé¢"},{"content":"ç¬¬ä¸€æ­¥ å®‰è£… VSCode Insiders https://code.visualstudio.com/insiders/code.visualstudio.com\nç›®å‰åªèƒ½åœ¨ VSCode Insiders ç‰ˆæœ¬ä½“éªŒ Remote Development\nç¬¬äºŒæ­¥ å®‰è£… Remote Development æ’ä»¶ https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpackmarketplace.visualstudio.com\nç¬¬ä¸‰æ­¥ é…ç½® SSH Config SSH é…ç½®æ–‡ä»¶\nHost ubuntu HostName \u0026lt;your-remote-host\u0026gt; User ubuntu è¿™é‡Œéœ€è¦å‡†å¤‡ä¸€ä¸ªè¿œç«¯çš„æœºå™¨ï¼Œè¿™æ ·å¯ä»¥ç›´æ¥è®¿é—®åˆ°æœåŠ¡å™¨çš„æ–‡ä»¶ã€‚\nç¬¬å››æ­¥ ç¼–å†™ Node åº”ç”¨ åŸºæœ¬å°± 4 ä¸ªæ–‡ä»¶ï¼Œå·²ç»æ”¾åˆ° github ä¸Šï¼š https://github.com/SASUKE40/docker_web_appgithub.com\nç¬¬äº”æ­¥ æ„å»ºæ¨é€ docker é•œåƒ https://hub.docker.com/hub.docker.com\nåœ¨åº”ç”¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œé•œåƒæ„å»º\ndocker build -t edward40/node-web-app .\næŸ¥çœ‹æ„å»ºçš„é•œåƒ\ndocker images\næœ¬åœ°è¯•è·‘é•œåƒ\ndocker run -p 3000:8080 -d edward40/node-web-app è®¿é—® http://localhost:3000\næ¨é€ Docker é•œåƒå¯ä»¥åœ¨ç»ˆç«¯æ‰§è¡Œ\ndocker push edward40/docker_web_app:tagname ä¸è¿‡è¿™é‡Œæˆ‘ç”¨å®˜æ–¹çš„è‡ªåŠ¨åŒ–æ„å»º\nåªè¦æ¨é€ä»£ç å°±ä¼š build å‡ºé•œåƒ\nç¬¬å…­æ­¥ æœåŠ¡å™¨ä¸Šè·‘é•œåƒ åœ¨ SSH ç»ˆç«¯ä¸­æ‹‰å– Node åº”ç”¨é•œåƒ\nsudo docker pull edward40/docker_web_app æœåŠ¡ç«¯å¯åŠ¨ Container\nsudo docker run -p 80:8080 -d edward40/docker_web_app ç¬¬ä¸ƒæ­¥ æœ¬åœ°å¼€å‘ Docker Container å®‰è£… Docker æ’ä»¶\nhttps://marketplace.visualstudio.com/items?itemName=PeterJausovec.vscode-dockermarketplace.visualstudio.com\né¡¹ç›®ç›®å½•åˆ›å»ºé…ç½®æ–‡ä»¶\nåˆ›å»º Container é…ç½®æ–‡ä»¶\nä¸è¿‡å› ä¸ºä½¿ç”¨ Alipine å¯¼è‡´æ— æ³•æ‰“å¼€\néœ€è¦åˆ‡æ¢åˆ«çš„ Linux ç³»ç»Ÿï¼Œå¹¶å¢åŠ  .devcontainer.json æ–‡ä»¶\n{ \u0026#34;name\u0026#34;: \u0026#34;Node.js Sample\u0026#34;, \u0026#34;dockerFile\u0026#34;: \u0026#34;Dockerfile\u0026#34;, \u0026#34;appPort\u0026#34;: 3000, \u0026#34;extensions\u0026#34;: [] } Dockerfile çš„ alpine æ¢æˆ lts ç‰ˆæœ¬\nFROM node:lts # Create app directory WORKDIR /usr/src/app # Install app dependencies # A wildcard is used to ensure both package.json AND package-lock.json are copied # where available (npm@5+) COPY package\\*.json ./ RUN npm install # If you are building your code for production # RUN npm ci --only=production # Bundle app source COPY . . EXPOSE 8080 CMD [ \u0026#34;npm\u0026#34;, \u0026#34;start\u0026#34; ] ç‚¹å‡»å³ä¸‹åœ¨å®¹å™¨ä¸­æ‰“å¼€\næ‰“å¼€ Shell\næœ€ç»ˆå¯ä»¥åœ¨å®¹å™¨ä¸­æ–¹ä¾¿ç”¨ç»ˆç«¯\nä½¿ç”¨å®¹å™¨ç»ˆç«¯\nä½¿ç”¨æ€»ç»“ VSCode çš„ Remote SSH æ’ä»¶å®Œç¾å‡»ä¸­è¿ç»´ç—›ç‚¹ï¼Œä»¥åå¯ä»¥æŠ›å¼ƒ Vim ç›´æ¥åœ¨ VSCode é‡Œé¢æ”¹ä¸œè¥¿ï¼Œéå¸¸æ–¹ä¾¿ã€‚ è€Œ Remote Containers æ’ä»¶å°±æœ‰ç‚¹é¸¡è‚‹ï¼Œè¿åˆ° Docker å®¹å™¨ä¸­å¥½åƒä¹Ÿæ²¡ä»€ä¹ˆå¤§çš„æ„ä¹‰ã€‚ä¸ªäººæ›´å€¾å‘ä»£ç æäº¤è§¦å‘ Docker Hub çš„è‡ªåŠ¨æ„å»ºèƒ½åŠ›ï¼Œå¹¶æœåŠ¡å™¨ä¸Šæ›´æ–° Docker é•œåƒå®¹å™¨è¿™æ ·çš„å·¥ä½œæµã€‚å¦‚æœæœ‰å°ä¼™ä¼´å‘ç°è¿™ä¸ªæ’ä»¶æ›´å¥½çš„ç”¨æ³•åŠ¡å¿…ç•™è¨€ã€‚ æœ€åï¼ŒVSCode Remote Development å¿«å¿« Release å§ï¼\n","date":"2019-05-17T00:00:00Z","image":"https://edward40.com/p/try-vscode-remote/vscode_hu_e2cc966b0fa35a6c.jpg","permalink":"https://edward40.com/p/try-vscode-remote/","title":"å°è¯•ä¸€ä¸‹ VSCode Remote å¼€å‘ Node åº”ç”¨"},{"content":"å‰è¨€ ry è¿‘æœŸæŠŠ deno çš„ç¬¬äºŒç‰ˆåŸå‹ä» deno2 æ–‡ä»¶å¤¹ä¸­è½¬ç§»åˆ° src ä¸Šäº†ï¼Œå¹¶åˆæ­¥å®Œæˆä¹‹å‰å®šä¸‹é’ˆå¯¹ unprivileged éƒ¨åˆ†çš„æ”¹é€ ç›®æ ‡ï¼š\nUse the gn build system for fast builds, sane configuration, and easy linking into Chrome. Use V8 snapshots to improve startup time. Remove Golang. Although it has been working nicely, I am concerned the double GC will become a problem sometime down the road. Distribute a C++ library called libdeno, containing the snapshotted typescript runtime. Test the message passing and other functionality at that layer before involving higher level languages. ç¿»è¯‘ï¼š ä½¿ç”¨ GN è¿™ä¸ªæ„å»ºå·¥å…·ï¼Œè¿™æ˜¯ chromium å›¢é˜Ÿä½¿ç”¨çš„æ„å»ºå·¥å…· ä½¿ç”¨ V8 Snapshots æå‡å¯åŠ¨é€Ÿåº¦ï¼ˆå·²å®Œæˆï¼‰ **ç§»é™¤ Golangï¼Œ**å› ä¸ºä¸æƒ³åŒæ—¶å­˜åœ¨ä¸¤ä¸ª GCï¼ˆGo å’Œ TSï¼‰ å¼„äº†ä¸€ä¸ª C++ åº“å« libdenoï¼Œè´Ÿè´£ TS çš„è¿è¡Œæ—¶ç¯å¢ƒ è¯•ç© å…‹éš† Depot Tools git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git é…ç½®ç¯å¢ƒå˜é‡ è¿™é‡Œæˆ‘æ˜¯æŠŠé…ç½®åˆ° .zshrc æ–‡ä»¶ä¸­\nexport PATH=$PATH:/path/to/depot_tools å…‹éš†ä»“åº“ git clone git@github.com:ry/deno.git è¿›å…¥åˆ° src æ–‡ä»¶å¤¹ cd deno/src è·å–åŒ…å’Œ v8 gclient sync --no-history ç„¶åä½ å°±ä¼šåœ¨ src ä¸‹çœ‹åˆ°ä¸€å †ä¸‰æ–¹åŒ…å’Œ v8 è¢«ä¸‹è½½ä¸‹æ¥\nå®‰è£… js ä¾èµ– cd js yarn install gn gen out/Debug --args=\u0026#39;cc_wrapper=\u0026#34;ccache\u0026#34; is_debug=true \u0026#39; ä½¿ç”¨ ninja ç¼–è¯‘ mac ä¸Šå¾—å…ˆå®‰è£… ccache ä¸ç„¶ä¼šæŠ¥ subcommand failed é”™è¯¯\nbrew install ccache åœ¨ src ä¸‹è¿›è¡Œç¼–è¯‘\nninja -C out/Debug/ deno è¯•ç€æ‰§è¡Œ è¿™æ · deno çš„æ‰§è¡Œæ–‡ä»¶å°±äº§ç”Ÿäº†\næ¥ç€è¿è¡Œçœ‹çœ‹\næ‰“å°å‡ºäº† v8 çš„ç‰ˆæœ¬ V8 6.8.275.14\n","date":"2018-06-28T00:00:00Z","image":"https://edward40.com/p/try-deno2/deno_hu_732fc4d7fcc1d9d.png","permalink":"https://edward40.com/p/try-deno2/","title":"è¯•ç© deno2"},{"content":"React 16.4 åŒ…å«äº†ä¸€ä¸ª getDerivedStateFromProps çš„ bugfixï¼Œè¿™ä¸ª bug å¯¼è‡´ä¸€äº› React ç»„ä»¶æ½œåœ¨çš„ bug ç¨³å®šå¤ç°ã€‚è¿™ä¸ªç‰ˆæœ¬æš´éœ²äº†ä¸ªæ¡ˆä¾‹ï¼Œå½“ä½ çš„åº”ç”¨æ­£åœ¨ä½¿ç”¨åæ¨¡å¼æ„å»ºï¼Œåˆ™å°†ä¼šåœ¨æ­¤æ¬¡ä¿®å¤åå¯èƒ½æ— æ³•å·¥ä½œï¼Œæˆ‘ä»¬å¯¹è¿™ä¸ªæ”¹åŠ¨æ„Ÿåˆ°æŠ±æ­‰ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†é˜è¿°ä¸€äº›é€šå¸¸çš„ä½¿ç”¨ Derived State çš„åæ¨¡å¼ä»¥åŠç›¸åº”çš„è§£å†³æ›¿ä»£æ–¹æ¡ˆã€‚\nåœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œåœ¨ props æ”¹å˜æ—¶å“åº” state çš„æ›´æ–°ï¼Œæ— éœ€é¢å¤–çš„æ¸²æŸ“ï¼Œå”¯ä¸€çš„é€”å¾„å°±æ˜¯ componentWillReceivePropsÂ è¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚åœ¨ 16.3 ç‰ˆæœ¬ä¸‹ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä¸€ä¸ªæ›¿ä»£çš„ç”Ÿå‘½å‘¨æœŸ getDerivedStateFromPropsÂ æ›´åŠ å®‰å…¨çš„æ–¹å¼æ¥è§£å†³ç›¸åŒçš„ç”¨ä¾‹ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬æ„è¯†åˆ°äººä»¬æœ‰å¾ˆå¤šå…³äºä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•çš„é”™è¯¯è§£è¯»ï¼Œæˆ‘ä»¬å‘ç°äº†è¿™äº›åæ¨¡å¼å¯¼è‡´ä¸€äº›å¾®å¦™ä¸”ä»¤äººå›°æƒ‘çš„ bugã€‚Â getDerivedStateFromPropsÂ åœ¨ 16.4 ä¸­åšäº†ä¿®å¤ï¼Œä½¿å¾— derived state æ›´åŠ å¯é¢„æµ‹ï¼Œå› æ­¤æ»¥ç”¨çš„åæœæ›´åŠ å®¹æ˜“è¢«ç•™æ„åˆ°ã€‚ NoteÂ æ‰€æœ‰å…³äºæ—§çš„ \u0026gt; componentWillReceivePropsÂ å’Œæ–° \u0026gt; getDerivedStateFromPropsÂ çš„åæ¨¡å¼éƒ½ä¼šåœ¨æœ¬æ–‡ä¸­é˜è¿°ã€‚ è¿™ç¯‡æ–‡ç« æ¶µç›–ä»¥ä¸‹è¯é¢˜ï¼š\nä»€ä¹ˆæ—¶å€™ä½¿ç”¨ derived state\nä½¿ç”¨ derived state æ—¶é€šå¸¸çš„ bug\nåæ¨¡å¼ï¼šæ— æ¡ä»¶åœ°å°† prop å¤åˆ¶ç»™ state\nåæ¨¡å¼ï¼šå½“ props æ”¹å˜æ—¶æ¸…é™¤ state\næ¨èçš„æ–¹æ¡ˆ\nä»€ä¹ˆæ˜¯ memoization ï¼Ÿ\nä»€ä¹ˆæ—¶å€™ä½¿ç”¨ Derived State getDerivedStateFromPropsÂ å­˜åœ¨åªä¸ºäº†ä¸€ä¸ªç›®çš„ã€‚å®ƒè®©ç»„ä»¶åœ¨ props å‘ç”Ÿæ”¹å˜æ—¶æ›´æ–°å®ƒè‡ªèº«çš„å†…éƒ¨ stateã€‚æˆ‘ä»¬ä¹‹å‰çš„æ–‡ç« æä¾›ä¸€äº›ä¾‹å­ï¼Œä¾‹å¦‚ï¼šåŸºäº offset prop çš„æ”¹å˜è®°å½•å½“å‰æ»šåŠ¨ä½ç½®æˆ–è€… é€šè¿‡æº prop åŠ è½½å¤–éƒ¨æ•°æ®ã€‚\næˆ‘ä»¬æ²¡æœ‰æä¾›æ›´å¤šçš„ä¾‹å­ï¼Œå› ä¸ºè¿™æœ‰ä¸€ä¸ªå¸¸è§„çš„å‡†åˆ™ï¼Œåº”è¯¥ä¿å®ˆåœ°ä½¿ç”¨ derived stateã€‚æ‰€æœ‰æˆ‘ä»¬çœ‹åˆ°å…³äº derived state çš„é—®é¢˜ä»æ ¹æœ¬ä¸Šå¯ä»¥å½’ç»“æˆä¸¤ç±»ï¼š(1) æ— æ¡ä»¶çš„ä»¥ props æ›´æ–° state æˆ–è€… (2) æ¯å½“ props å’Œ state ä¸åŒæ—¶å°±æ›´æ–° stateã€‚(æˆ‘ä»¬å°†åœ¨ä¸‹é¢è°ˆåˆ°æ›´å¤šç»†èŠ‚ã€‚)\nå½“ä½ ä½¿ç”¨ derived state æ¥æš‚å­˜ä¸€äº›ä»…åŸºäºå½“å‰ props çš„è®¡ç®—ç»“æœæ—¶ï¼Œä½ ä¸éœ€è¦ derived stateã€‚æŸ¥çœ‹ ä»€ä¹ˆæ˜¯ memoization ?\nå½“ä½ æ— æ¡ä»¶æ›´æ–° derived state æŠ‘æˆ–æ˜¯æ¯å½“ props ä¸ state ä¸åŒæ—¶æ›´æ–° stateï¼Œä½ çš„ç»„ä»¶å¯èƒ½ä¼šé¢‘ç¹é‡ç½®å®ƒçš„ stateã€‚\nä½¿ç”¨ Derived State æ—¶çš„å¸¸è§ bug â€œå—æ§çš„â€ å’Œ â€œä¸å—æ§çš„â€ è¿™ä¸¤ä¸ªæœ¯è¯­ç»å¸¸æ¶‰åŠåˆ° form çš„ inputï¼Œç„¶è€Œä»–ä»¬ä¹Ÿèƒ½æè¿°ç»„ä»¶æ•°æ®å­˜åœ¨çš„ä½ç½®ã€‚å½“æ•°æ®ä½œä¸º props ä¼ é€’æ—¶ï¼Œåˆ™æ•°æ®å¯ä»¥è¢«è®¤ä¸ºæ˜¯å—æ§çš„(å› ä¸ºçˆ¶ç»„ä»¶æ§åˆ¶äº†è¿™äº›æ•°æ®)ã€‚ä»…å­˜åœ¨äºå†…éƒ¨ state çš„æ•°æ®å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸å—æ§çš„(å› ä¸ºçˆ¶ç»„ä»¶ä¸èƒ½ç›´æ¥æ”¹å˜å®ƒ)ã€‚\nderived state çš„æœ€å¸¸è§é”™è¯¯å°±æ˜¯æ··åˆäº†â€œå—æ§â€å’Œâ€œä¸å—æ§â€ä¸¤ç§æƒ…å†µï¼›å½“ä¸€ä¸ª derived state å€¼ä¹Ÿä½¿ç”¨ setStateÂ æ¥æ›´æ–°æ—¶ï¼Œé‚£å®ƒæ•°æ®æ¥æºå°±ä¸æ˜¯å”¯ä¸€çš„ã€‚ä¸Šæ–‡æåˆ°çš„â€œå¤–éƒ¨æ•°æ®åŠ è½½çš„ä¾‹å­â€çœ‹ä¸Šå»å¥½åƒå°±æ˜¯è¿™æ ·ï¼Œä½†å…¶å®æœ‰æœ¬è´¨ä¸Šå·®åˆ«ã€‚åœ¨æ•°æ®åŠ è½½ä¾‹å­ä¸­ï¼Œ\u0026lsquo;source\u0026rsquo; prop å’Œ \u0026rsquo;loading\u0026rsquo; state éƒ½æœ‰æ˜ç¡®çš„æ•°æ®æ¥æºã€‚å½“ \u0026lsquo;source\u0026rsquo; propÂ æ”¹å˜æ—¶ï¼Œ \u0026rsquo;loading\u0026rsquo; stateÂ æ€»ä¼šè¢«è¦†ç›–ã€‚ç›¸ååœ°ï¼Œstate å½“ä¸”ä»…å½“ prop æ”¹å˜æ—¶æ‰ä¼šè¢«è¦†ç›–ï¼Œå¦åˆ™åªèƒ½è¢« state æ‰€åœ¨çš„ç»„ä»¶æ‰€ç®¡ç†ã€‚\nå½“è¿™äº›çº¦æŸè¢«æ”¹å˜æ—¶é—®é¢˜å°±æµ®ç°äº†ã€‚è¿™ä¼šäº§ç”Ÿä¸¤ä¸ªç»å…¸å½¢å¼ã€‚è®©æˆ‘ä»¬çœ‹ä¸€çœ‹ä»–ä»¬ã€‚\nåæ¨¡å¼ï¼šæ— æ¡ä»¶åœ°å°† prop å¤åˆ¶ç»™ state ä¸€ä¸ªå¸¸è§å…³äº getDerivedStateFromPropsÂ å’Œ componentWillReceivePropsÂ çš„é”™è¯¯ç†è§£å°±æ˜¯ä»–ä»¬åªä¼šåœ¨ props â€œå˜åŒ–â€æ—¶è°ƒç”¨ã€‚æ— è®ºæ˜¯ç»„ä»¶é‡æ–°æ¸²æŸ“è¿˜æ˜¯ props å’Œä¹‹å‰â€œä¸åŒâ€ï¼Œè¿™äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•éƒ½ä¼šè¢«è°ƒç”¨ã€‚åŸºäºæ­¤ï¼Œè¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ€»æ˜¯è¢«ç”¨äºä¸å®‰å…¨åœ°æ— æ¡ä»¶åœ°è¦†ç›– stateã€‚è¿™æ ·åšå°†å¯¼è‡´ state çš„æ›´æ–°å‘ç”Ÿä¸¢å¤±ã€‚\nè®©æˆ‘ä»¬æ€è€ƒä¸€ä¸ªä¾‹å­æ¥è¯´æ˜è¿™ä¸ªé—®é¢˜ã€‚è¿™é‡Œæœ‰ä¸€ä¸ª EmailInputÂ ç»„ä»¶â€œæ˜ å°„â€äº†ä¸€ä¸ª email å±æ€§åœ¨ state ä¸­ï¼š\nclass EmailInput extends Component { state = { email: this.props.email } render() { return \u0026lt;input onChange={this.handleChange} value={this.state.email} /\u0026gt; } handleChange = event =\u0026gt; { this.setState({ email: event.target.value }) } componentWillReceiveProps(nextProps) { // This will erase any local state updates! // Do not do this. this.setState({ email: nextProps.email }) } } é¦–å…ˆï¼Œè¿™ä¸ªç»„ä»¶çœ‹ä¸Šå»æ²¡ä»€ä¹ˆé—®é¢˜ã€‚State è¢« props ä¼ é€’è¿›æ¥çš„å€¼æ‰€åˆå§‹åŒ–ï¼Œå¹¶åœ¨æˆ‘ä»¬é”®å…¥ \u0026lt;input\u0026gt;Â çš„æ—¶å€™è¢«æ›´æ–°ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬çš„çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¾“å…¥åˆ° inputÂ çš„å†…å®¹å°±ä¼šä¸¢å¤±(çœ‹è¿™ä¸ªä¾‹å­)ï¼å³ä½¿æˆ‘ä»¬åœ¨é‡ç½®å‰è¿›è¡Œæ¯”è¾ƒ nextProps.email !== this.state.emailä¹Ÿä¼šè¿™æ ·ã€‚\nåœ¨è¿™ä¸ªç®€å•çš„ä¾‹å­ä¸­ï¼Œåªæœ‰å½“ email å±æ€§è¢«æ”¹å˜æ—¶åŠ å…¥ shouldComponentUpdateÂ æ¥è§£å†³é‡æ¸²æŸ“ã€‚ç„¶è€Œåœ¨å®è·µä¸­ï¼Œç»„ä»¶æ€»æ˜¯æ¥å—å¤šä¸ª propsï¼›å¦ä¸€ä¸ª prop æ”¹å˜æ—¶ä¾ç„¶ä¼šå¯¼è‡´é‡æ¸²æŸ“å’Œä¸å½“é‡ç½®ã€‚åœ¨å‡½æ•°å’Œå¯¹è±¡å±æ€§åœ¨å†…éƒ¨è¢«åˆ›å»ºï¼Œåœ¨ä¸€ä¸ªå®è´¨æ€§çš„å˜åŒ–å‘ç”Ÿæ—¶ï¼Œå®ç° shouldComponentUpdateÂ å¯é åœ°åªè¿”å› true å€¼å˜å¾—å›°éš¾ã€‚è¿™é‡Œæœ‰ä¸ª demo å±•ç¤ºå‘ç”Ÿçš„æƒ…å†µã€‚å› æ­¤ï¼ŒÂ shouldComponentUpdateÂ ä½œä¸ºæ€§èƒ½ä¼˜åŒ–çš„æœ€å¥½æ–¹å¼è¢«ä½¿ç”¨ï¼Œè€Œä¸ç”¨åœ¨ derived state ä¸­ä¿è¯æ­£ç¡®æ€§ã€‚\nè‡³æ­¤ï¼Œä¸ºä½•æ— æ¡ä»¶åœ°å°† props å¤åˆ¶ç»™ state æ˜¯ä¸€ä¸ªåæƒ³æ³•æ˜¾è€Œæ˜“è§ã€‚åœ¨ review å¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªæœ‰å…³çš„é—®é¢˜æ¨¡å¼ï¼šåœ¨ email å±æ€§æ”¹å˜æ—¶ï¼Œå¦‚æœæˆ‘ä»¬åªæ›´æ–° state ï¼Ÿ\nåæ¨¡å¼ï¼šå½“ props æ”¹å˜æ—¶æ¸…é™¤ state ç»§ç»­ä¸Šè¿°çš„ä¾‹å­ï¼Œå½“ props.emailÂ æ”¹å˜æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åªæ›´æ–°æ¥é¿å…æ„å¤–åœ°æ¸…é™¤ stateï¼š\nclass EmailInput extends Component { state = { email: this.props.email } componentWillReceiveProps(nextProps) { // Any time props.email changes, update state. if (nextProps.email !== this.props.email) { this.setState({ email: nextProps.email }) } } // ... } Note ä¸ä»…åœ¨ä»¥ä¸Šä¾‹å­ä¸­ \u0026gt; componentWillReceivePropsÂ ,ä¸€ä¸ªçš„åæ¨¡å¼ä¹Ÿè¢«ç”¨äº \u0026gt; getDerivedStateFromPropsÂ ä¸­ã€‚ æˆ‘ä»¬åšäº†å¾ˆå¤§çš„æ”¹è¿›ã€‚ç°åœ¨æˆ‘ä»¬çš„ç»„ä»¶åœ¨ props å®è´¨å˜åŒ–æ—¶æ‰ä¼šæ¸…æ¥šæˆ‘ä»¬è¾“å…¥çš„å†…å®¹ã€‚\nä½†ä¾æ—§å­˜åœ¨ä¸€ä¸ªå¾®å¦™çš„é—®é¢˜ã€‚æƒ³è±¡ä¸€ä¸‹ä¸€ä¸ªå¯†ç ç®¡ç†åº”ç”¨ä½¿ç”¨ä¸Šè¿°è¾“å…¥ç»„ä»¶ã€‚å½“åœ¨ä¸¤ä¸ªç›¸åŒ email çš„è´¦æˆ·ä¸‹åˆ‡æ¢æ—¶ï¼Œè¾“å…¥ç»„ä»¶é‡ç½®ä¼šå¤±è´¥ã€‚è¿™æ˜¯å› ä¸ºä¸¤ä¸ªè´¦æˆ·ä¼ é€’ç»™ç»„ä»¶çš„ prop å€¼æ˜¯ç›¸åŒçš„ï¼è¿™ä½¿å¾—ç”¨æˆ·æ„Ÿåˆ°è¯§å¼‚ï¼Œä¸€ä¸ªè´¦æˆ·æ²¡æœ‰ä¿å­˜çš„å˜æ›´ä¼šå½±å“å¦ä¸€ä¸ªå…±äº«åŒä¸€ email çš„è´¦å·ä¸Šã€‚(è¿™é‡Œçœ‹ demo)\nè¿™ç§è®¾è®¡æ˜¯æœ‰æœ¬è´¨ç¼ºé™·çš„ï¼Œä½†å®ƒæ˜¯æœ€å®¹æ˜“çŠ¯çš„ã€‚(æˆ‘å°±çŠ¯è¿‡ï¼)å¹¸è¿çš„æ˜¯ï¼Œä»¥ä¸‹æœ‰ä¸¤ä¸ªæ›´å¥½çš„æ›¿ä»£æ–¹æ¡ˆã€‚è€Œå…³é”®å°±æ˜¯å¯¹æ¯ä¸€ç‰‡æ•°æ®ï¼Œä½ éœ€è¦é€‰ä¸€ä¸ªæ§åˆ¶æ•°æ®å¹¶ä»¥å…¶ä½œä¸ºçœŸå®æºçš„ç®€å•ç»„ä»¶ï¼Œå¹¶é¿å…å‰¯æœ¬æ•°æ®å­˜åœ¨äºå…¶ä»–ç»„ä»¶ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™äº›æ›¿ä»£æ–¹æ¡ˆã€‚\nä¼˜é€‰æ–¹æ¡ˆ æ¨èï¼šå®Œå…¨å—æ§ç»„ä»¶ ä¸€ä¸ªé¿å…ä¸Šè¿°æ¶‰åŠé—®é¢˜çš„é€”å¾„å°±æ˜¯å®Œå…¨åœ°ç§»é™¤æˆ‘ä»¬ç»„ä»¶ä¸­çš„ stateã€‚å¦‚æœ email åœ°å€åªå­˜åœ¨äº propï¼Œé‚£æˆ‘ä»¬æ²¡å¿…è¦æ‹…å¿ƒ state çš„å†²çªã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥æŠŠ EmailInputÂ ç¼“å­˜ä¸€ä¸ªæ›´åŠ è½»é‡çš„å‡½æ•°å¼çš„ç»„ä»¶ï¼š\nfunction EmailInput(props) { return \u0026lt;input onChange={props.onChange} value={props.email} /\u0026gt; } è¿™ä¸ªé€”å¾„ç®€åŒ–äº†æˆ‘ä»¬ç»„ä»¶çš„å®ç°ï¼Œä½†æ˜¯æˆ‘ä»¬å¦‚æœæƒ³å­˜å‚¨è‰ç¨¿çš„æ—¶å€™ï¼Œçˆ¶ç»„ä»¶è¿˜æ˜¯éœ€è¦æ‰‹å·¥å®Œæˆè¿™ä»¶äº‹ã€‚(ç‚¹è¿™çœ‹è¿™ç§æ¨¡å¼çš„ä¾‹å­)\næ¨èï¼šå¸¦æœ‰ key çš„å®Œå…¨ä¸å—æ§ç»„ä»¶ å¦ä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆå°±æ˜¯æˆ‘ä»¬çš„ç»„ä»¶å®Œå…¨çš„æ§åˆ¶è‡ªå·±çš„ email state â€œè‰ç¨¿â€ã€‚åœ¨æ­¤ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„ç»„ä»¶ä¾ç„¶å¯ä»¥æ¥æ”¶ä¸€ä¸ªæ¥è‡ªäºåˆå§‹å€¼ï¼Œä½†å®ƒå°†ä¼šå¿½ç•¥åé¢ prop çš„æ”¹åŠ¨ï¼š\nclass EmailInput extends Component { state = { email: this.props.defaultEmail } handleChange = event =\u0026gt; { this.setState({ email: event.target.value }) } render() { return \u0026lt;input onChange={this.handleChange} value={this.state.email} /\u0026gt; } } ä¸ºäº†èƒ½åœ¨ä¸åŒçš„æƒ…å¢ƒä¸‹é‡ç½®å€¼(å¦‚å¯†ç ç®¡ç†æ–¹æ¡ˆ)ï¼Œæˆ‘ä»¬ä½¿ç”¨ç‰¹æ®Šçš„ React å±æ€§ keyÂ ã€‚å½“ keyÂ æ”¹å˜æ—¶ï¼ŒReactÂ å°†åˆ›å»ºä¸€ä¸ªæ–°çš„ç»„ä»¶å®ä¾‹è€Œä¸æ˜¯æ›´æ–°ç°æœ‰çš„è¿™ä¸ªã€‚Keys ç»å¸¸è¢«ç”¨äºåŠ¨æ€ listï¼Œä½†åœ¨è¿™é‡Œä¾ç„¶ç®¡ç”¨ã€‚åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬èƒ½æ ¹æ® user ID åœ¨æ–°ç”¨æˆ·è¢«é€‰ä¸­æ—¶é‡æ–°åˆ›å»º email è¾“å…¥ç»„ä»¶ï¼š\n\u0026lt;EmailInput defaultEmail={this.props.user.email} key={this.props.user.id} /\u0026gt; æ¯å½“ ID æ”¹å˜æ—¶ï¼ŒÂ EmailInputÂ å°†ä¼šè¢«é‡æ–°åˆ›å»ºï¼Œå®ƒçš„ state å°†ä¼šç”¨æœ€æ–°çš„ defaultEmailÂ å€¼é‡ç½®ã€‚(ç‚¹è¿™é‡Œçœ‹è¿™ç§æ¨¡å¼çš„ä¾‹å­)ä½¿ç”¨è¿™ç§é€”å¾„ï¼Œä½ ä¸éœ€è¦ä¸ºæ¯ä¸€ä¸ªè¾“å…¥ç»„ä»¶åŠ  keyÂ ã€‚ä¹Ÿè®¸åœ¨ from ä¸­åŠ ä¸€ä¸ª keyÂ ä¼šæ¥å¾—æ›´å¥½ã€‚æ¯å½“ key æ”¹å˜æ—¶ï¼Œæ‰€æœ‰åœ¨ from é‡Œçš„ç»„ä»¶éƒ½ä¼šç”¨ä¸€ä¸ªæ–°çš„ initialized state æ¥é‡æ–°åˆ›å»ºã€‚\næ›´å¤šçš„æ¡ˆä¾‹ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤„ç†éœ€è¦è¢«é‡ç½®çš„ state çš„æœ€ä½³æ–¹å¼ã€‚ Note è™½ç„¶è¿™è²Œä¼¼ä¼šå¾ˆæ…¢ï¼Œåœ¨æ€§èƒ½å·®å¼‚æ— å…³ç´§è¦çš„æ—¶å€™ã€‚å½“ç»„ä»¶æœ‰å¾ˆé‡çš„æ›´æ–°é€»è¾‘æ—¶å€™ï¼Œä½¿ç”¨ä¸€ä¸ª key ï¼Œå¿½ç•¥å­æ ‘ diffing ç”šè‡³ä¼šæ›´å¿«ã€‚\næ›¿ä»£æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ ID prop é‡ç½®ä¸å—æ§ç»„ä»¶ å¦‚æœ keyÂ ç”±äºæŸäº›åŸå› ä¸èƒ½è¢«ä½¿ç”¨(ä¹Ÿè®¸ç»„ä»¶æœ‰æ˜‚è´µçš„åˆå§‹åŒ–ä»£ä»·)ï¼Œä¸€ä¸ªå¯è¡Œä½†ç¬¨é‡çš„æ–¹æ¡ˆå°±æ˜¯åœ¨ getDerivedStateFromPropsÂ ä¸­ç›‘å¬ â€œuserIDâ€ çš„æ”¹å˜ï¼š\nclass EmailInput extends Component { state = { email: this.props.defaultEmail, prevPropsUserID: this.props.userID } static getDerivedStateFromProps(props, state) { // Any time the current user changes, // Reset any parts of state that are tied to that user. // In this simple example, that\u0026#39;s just the email. if (props.userID !== state.prevPropsUserID) { return { prevPropsUserID: props.userID, email: props.defaultEmail } } return null } // ... } è¿™ä¹Ÿæä¾›äº†çµæ´»æ€§â€”â€”é‡ç½®éƒ¨åˆ†è¢«æˆ‘ä»¬é€‰ä¸­çš„ç»„ä»¶å†…éƒ¨ stateã€‚(ç‚¹è¿™é‡Œçœ‹æ­¤æ¨¡å¼çš„ demo) Note åŠæ—¶ä»¥ä¸Šä¾‹å­å±•ç¤ºäº† \u0026gt; getDerivedStateFromPropsÂ ï¼ŒåŒæ ·çš„æŠ€æœ¯æ‰‹æ®µä¹Ÿå¯ä»¥è¢«ç”¨åœ¨ \u0026gt; componentWillReceivePropsÂ ã€‚\næ›¿ä»£æ–¹å¼ 2ï¼šåœ¨ä¸€ä¸ªå®ä¾‹æ–¹æ³•ä¸­é‡ç½®ä¸å—æ§ç»„ä»¶ æ›´ç½•è§åœ°ï¼Œä½ å¯èƒ½éœ€è¦é‡ç½® state å³ä½¿æ²¡æœ‰é€‚å½“çš„ ID å¯ç”¨ä¸º keyÂ ã€‚ä¸€ä¸ªè§£å†³æ–¹æ¡ˆå°±æ˜¯æ¯æ¬¡ä½ æƒ³é‡ç½®æ—¶ç”¨ä¸€ä¸ªéšæœºæ•°æˆ–è€…è‡ªå¢æ•°å­—é‡ç½® keyã€‚å¦ä¸€ä¸ªå¯è¡Œçš„æ–¹æ¡ˆæ˜¯æš´éœ²ä¸€ä¸ªå®ä¾‹æ–¹æ³•å‘½ä»¤å¼çš„é‡ç½®å†…éƒ¨ stateï¼š\nclass EmailInput extends Component { state = { email: this.props.defaultEmail } resetEmailForNewUser(newEmail) { this.setState({ email: newEmail }) } // ... } çˆ¶ç»„ä»¶èƒ½ç”¨ ref æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚(ç‚¹å‡»è¿™çœ‹è¿™ä¸ªæ¨¡å¼ä¾‹å­)\nRefs åœ¨è¿™ä¸ªç¡®å®šçš„ä¾‹å­ä¸­æ˜¯æœ‰ç”¨çš„ï¼Œä½†é€šå¸¸ä¸Šæˆ‘ä»¬å»ºè®®ä½ ä¿å®ˆä½¿ç”¨ã€‚ç”šè‡³åœ¨è¿™ä¸ª demo ä¸­ï¼Œè¿™ä¸ªå¿…è¦çš„æ–¹æ³•æ˜¯ä¸ç†æƒ³çš„ï¼Œå› ä¸ºæœ¬æ¥ä¸€æ¬¡çš„æ¸²æŸ“ä¼šå˜æˆä¸¤æ¬¡ã€‚\næ‰¼è¦é‡è¿° é‡è¿°ä¸€ä¸‹ï¼Œå½“è®¾è®¡ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œå†³å®šæ•°æ®æ˜¯å¦å—æ§æˆ–ä¸å—æ§æ˜¯è‡³å…³é‡è¦çš„ã€‚\nè®©ç»„ä»¶å˜å¾—å—æ§ï¼Œè€Œä¸æ˜¯è¯•å›¾åœ¨**Â state ä¸­å¤åˆ¶ä¸€ä¸ª propÂ **ï¼Œåœ¨ä¸€äº›çˆ¶ç»„ä»¶çš„ state ä¸­è”åˆä¸¤ä¸ªåˆ†æ•£çš„å€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸å…¶å­ç»„ä»¶æ¥æ”¶ä¸€ä¸ªâ€œå·²æäº¤çš„â€Â props.valueÂ å¹¶è·Ÿè¸ªä¸€ä¸ªâ€œè‰ç¨¿â€Â state.valueÂ ï¼Œä¸å¦‚åœ¨çˆ¶ç»„ä»¶ä¸­ç®¡ç† state.draftValueÂ å’Œ state.committedValueÂ ï¼Œå¹¶æ§åˆ¶ç›´æ¥æ§åˆ¶å­ç»„ä»¶çš„å€¼ã€‚è¿™è®©æ•°æ®æµæ›´åŠ æ˜ç¡®å’Œå¯é¢„æµ‹ã€‚\nå¯¹ä¸å—æ§ç»„ä»¶ï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ªç‰¹æ®Šçš„ prop (é€šå¸¸æ˜¯ ID)æ”¹å˜æ—¶è¯•å›¾é‡ç½® stateï¼Œä½ æœ‰ä¸€äº›é€‰æ‹©ï¼š\næ¨èï¼šé‡ç½®æ‰€æœ‰å†…éƒ¨ stateï¼Œä½¿ç”¨ key å±æ€§\næ›¿ä»£æ–¹æ¡ˆ 1ï¼šä»…é‡ç½®ç¡®å®šçš„ state å­—æ®µï¼Œç›‘å¬ç‰¹å®šå±æ€§çš„å˜åŒ–(ä¾‹å¦‚ï¼šÂ props.userID)ã€‚\næ›¿ä»£æ–¹æ¡ˆ 2ï¼šä½ ä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨ refs è°ƒç”¨ä¸€ä¸ªå‘½ä»¤å¼å®ä¾‹æ–¹æ³•ã€‚\nä»€ä¹ˆæ˜¯ memoization ? æˆ‘ä»¬ä¹Ÿçœ‹åˆ°ï¼Œä»…å½“è¾“å…¥å˜åŒ–çš„æ—¶å€™ï¼Œderived state è¢«ç”¨äºç¡®ä¿å…³é”®å€¼è¢«ç”¨äº renderÂ ä¸­ä¼šé‡æ–°è®¡ç®—ã€‚è¿™ä¸ªæŠ€å·§è¢«ç§°ä¹‹ä¸º memoizationã€‚\nä½¿ç”¨ derived state æ¥å®Œæˆ memoization å¹¶ä¸ä¸€å®šæ˜¯åäº‹ï¼Œä½†è¿™ç»å¸¸ä¸æ˜¯æœ€ä½³æ–¹æ¡ˆã€‚ç®¡ç† derived state å…·æœ‰å†…åœ¨å¤æ‚åº¦ï¼Œè¿™ä¸ªå¤æ‚åº¦éšç€å±æ€§çš„å¢åŠ è€Œæå‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åŠ å…¥ç¬¬äºŒä¸ª derived feild åˆ°æˆ‘ä»¬çš„ç»„ä»¶ stateï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å®ç°å°†éœ€è¦åˆ†åˆ«è·Ÿè¸ªä¸¤è€…çš„å˜åŒ–ã€‚\nè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­â€”â€”ç»„ä»¶æºå¸¦ä¸€ä¸ªå±æ€§(ä¸€ä¸ª item list)ï¼Œå¹¶æ¸²æŸ“åŒ¹é…ç”¨æˆ·è¾“å…¥çš„æœç´¢æŸ¥è¯¢çš„ itemã€‚æˆ‘ä»¬ä½¿ç”¨ derived state å­˜å‚¨è¿‡æ»¤çš„ listï¼š\nclass Example extends Component { state = { filterText: \u0026#39;\u0026#39; } // ******************************************************* // NOTE: this example is NOT the recommended approach. // See the examples below for our recommendations instead. // ******************************************************* static getDerivedStateFromProps(props, state) { // Re-run the filter whenever the list array or filter text change. // Note we need to store prevPropsList and prevFilterText to detect changes. if ( props.list !== state.prevPropsList || state.prevFilterText !== state.filterText ) { return { prevPropsList: props.list, prevFilterText: state.filterText, filteredList: props.list.filter(item =\u0026gt; item.text.includes(state.filterText) ) } } return null } handleChange = event =\u0026gt; { this.setState({ filterText: event.target.value }) } render() { return ( \u0026lt;Fragment\u0026gt; \u0026lt;input onChange={this.handleChange} value={this.state.filterText} /\u0026gt; \u0026lt;ul\u0026gt; {this.state.filteredList.map(item =\u0026gt; ( \u0026lt;li key={item.id}\u0026gt;{item.text}\u0026lt;/li\u0026gt; ))} \u0026lt;/ul\u0026gt; \u0026lt;/Fragment\u0026gt; ) } } è¿™ä¸ªå®ç°é¿å…äº†ä¸å¿…è¦ filteredListÂ çš„é‡æ–°è®¡ç®—ã€‚ä½†è¿™æ¯”åŸæ¥çš„æ›´å¤æ‚ï¼Œå› ä¸ºä»–å¿…é¡»åˆ†å¼€è·Ÿè¸ªå’Œæ£€æµ‹ props å’Œ state çš„å˜åŒ–ï¼Œæ‰èƒ½æ­£ç¡®æ›´æ–°è¿‡æ»¤åçš„åˆ—è¡¨ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬èƒ½ä½¿ç”¨ PureComponentÂ ç®€åŒ–å·¥ä½œï¼Œç§»åŠ¨æ›´æ–°æ“ä½œåˆ° render æ–¹æ³•ä¸­ï¼š\n// PureComponents only rerender if at least one state or prop value changes. // Change is determined by doing a shallow comparison of state and prop keys. class Example extends PureComponent { // State only needs to hold the current filter text value: state = { filterText: \u0026#39;\u0026#39; } handleChange = event =\u0026gt; { this.setState({ filterText: event.target.value }) } render() { // The render method on this PureComponent is called only if // props.list or state.filterText has changed. const filteredList = this.props.list.filter(item =\u0026gt; item.text.includes(this.state.filterText) ) return ( \u0026lt;Fragment\u0026gt; \u0026lt;input onChange={this.handleChange} value={this.state.filterText} /\u0026gt; \u0026lt;ul\u0026gt; {filteredList.map(item =\u0026gt; ( \u0026lt;li key={item.id}\u0026gt;{item.text}\u0026lt;/li\u0026gt; ))} \u0026lt;/ul\u0026gt; \u0026lt;/Fragment\u0026gt; ) } } è¿™ç§é€”å¾„æ¯”ç”¨ derived state æ›´åŠ æ¸…æ™°ä¸”ç®€å•ã€‚å¶å°”åœ°ï¼Œè¿™ä¸å¤Ÿå¥½â€”â€”åœ¨å¤§åˆ—è¡¨ä¸­è¿‡æ»¤ä¼šå˜å¾—æ…¢ï¼Œå¦‚æœå…¶ä»– prop å˜åŒ–æ—¶ PureComponentÂ ä¸ä¼šé˜»æ­¢é‡æ¸²æŸ“ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åŠ å…¥ä¸€ä¸ª memoization helper æ¥é¿å…å¯¹ list çš„ä¸å¿…è¦è¿‡æ»¤ï¼š\nimport memoize from \u0026#39;memoize-one\u0026#39; class Example extends Component { // State only needs to hold the current filter text value: state = { filterText: \u0026#39;\u0026#39; } // Re-run the filter whenever the list array or filter text changes: filter = memoize((list, filterText) =\u0026gt; list.filter(item =\u0026gt; item.text.includes(filterText)) ) handleChange = event =\u0026gt; { this.setState({ filterText: event.target.value }) } render() { // Calculate the latest filtered list. If these arguments haven\u0026#39;t changed // since the last render, `memoize-one` will reuse the last return value. const filteredList = this.filter(this.props.list, this.state.filterText) return ( \u0026lt;Fragment\u0026gt; \u0026lt;input onChange={this.handleChange} value={this.state.filterText} /\u0026gt; \u0026lt;ul\u0026gt; {filteredList.map(item =\u0026gt; ( \u0026lt;li key={item.id}\u0026gt;{item.text}\u0026lt;/li\u0026gt; ))} \u0026lt;/ul\u0026gt; \u0026lt;/Fragment\u0026gt; ) } } è¿™æ›´åŠ ç®€å•ï¼Œè€Œä¸”æ€§èƒ½å’Œ derived state ç‰ˆæœ¬çš„ä¸€æ ·å¥½ï¼\nå½“ä½¿ç”¨ memoization æ—¶ï¼Œè®°ä½ä¸€äº›çº¦æŸæ¡ä»¶ï¼š\nåœ¨å¤§å¤šæ•°æ¡ˆä¾‹ä¸­ï¼Œä½ ä¼šæƒ³æŠŠ memoized å‡½æ•°é™„åŠ åˆ°ç»„ä»¶å®ä¾‹ä¸Šã€‚è¿™é˜²æ­¢ä¸€ä¸ªç»„ä»¶çš„å¤šä¸ªå®ä¾‹é‡ç½®å½¼æ­¤çš„ memoized keyã€‚\né€šå¸¸åœ°ï¼Œä½ ä¼šæƒ³ä½¿ç”¨ä¸€ä¸ªå…·æœ‰ç¼“å­˜å¤§å°é™åˆ¶çš„ memoization helper æ¥é¿å…å†…å­˜æ³„éœ²é—®é¢˜ã€‚ï¼ˆåœ¨ä»¥ä¸Šçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç”¨äº† memoize-oneÂ å› ä¸ºå®ƒä»…ç¼“å­˜æœ€è¿‘çš„å‚æ•°å’Œç»“æœã€‚ï¼‰\nå¦‚æœ props.listÂ åœ¨æ¯æ¬¡çˆ¶ç»„ä»¶æ¸²æŸ“æ—¶è¢«é‡æ–°åˆ›å»ºï¼Œæœ¬èŠ‚ä¸­å±•ç¤ºçš„å®ç°æ‰‹æ®µæ˜¯æ— æ³•å·¥ä½œçš„ã€‚ä½†åœ¨å¤šæ•°æ¡ˆä¾‹ä¸­ï¼Œè¿™ç§è®¾ç½®æ˜¯é€‚å½“çš„ã€‚\nç»“è¯­ åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œç»„ä»¶ç»å¸¸åŒ…å«å—æ§å’Œä¸å—æ§è¡Œä¸ºçš„æ··åˆã€‚è¿™æ˜¯æ²¡é—®é¢˜çš„ï¼å¦‚æœæ¯ä¸€ä¸ªå€¼éƒ½æœ‰æ¸…æ™°çš„çœŸå®æºï¼Œä½ å¯ä»¥é¿å…ä¸Šé¢æåŠçš„åæ¨¡å¼ã€‚\nåŒæ ·å€¼å¾—é‡ç”³çš„æ˜¯ï¼ŒÂ getDerivedStateFromPropsÂ (ä¸€èˆ¬çš„ derived state) æ˜¯ä¸€ä¸ªé«˜çº§ç‰¹æ€§ï¼Œç”±äºå…¶å¤æ‚åº¦ï¼Œåº”è¯¥ä¿å®ˆçš„ä½¿ç”¨å®ƒã€‚å¦‚æœä½ ä½¿ç”¨çš„æ¡ˆä¾‹è¶…å‡ºè¿™äº›æ¨¡å¼ï¼Œè¯·åœ¨ GithubÂ æˆ– TwitterÂ ä¸Šä¸æˆ‘ä»¬åˆ†äº«ï¼\nåŸæ–‡é“¾æ¥ï¼šYou Probably Don\u0026rsquo;t Need Derived State - React Blog\n","date":"2018-06-15T00:00:00Z","image":"https://edward40.com/p/you-may-dont-need-drevied-state/react-derived-state_hu_2806432fdd4074de.jpg","permalink":"https://edward40.com/p/you-may-dont-need-drevied-state/","title":"ä½ å¯èƒ½ä¸éœ€è¦ DerivedÂ State"},{"content":"å‰è¨€ å¯èƒ½å¤§å®¶æœƒå•ï¼šâ€œå®˜ç¶²ç¤ºä¾‹é‚£éº¼ç°¡å–®ï¼Œæœ‰å¿…è¦è¬›è§£å—ï¼Ÿâ€ï¼Œæˆ‘çš„çœ‹æ³•æ˜¯ï¼šâ€œéå¸¸éœ€è¦ï¼â€ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œå®˜æ–¹æ–‡æª”æ˜¯å­¸ç¿’æ–°çŸ¥è­˜æœ€å¥½çš„å»è™•ï¼Œä½ å¯ä»¥ç­è§£å®ƒçš„ç†å¿µã€æ€æƒ³ã€æ¨¡å¼å’Œ API ç­‰ç­‰ï¼Œå¯è¬‚æ˜¯ç„¡æ‰€ä¸åŒ…ã€‚ç›¸å°ä¾†èªªï¼Œå®˜ç¶²çš„ Sample å°±æ˜¯èƒ½å¿«é€Ÿçš„ç­è§£å’Œåˆ‡å…¥çš„ç›´è§€é«”ç¾ã€‚å› æ­¤ï¼Œä»Šå¤©ä¾†çœ‹çœ‹å®˜ç¶²çš„ç¤ºä¾‹è¦å‘Šè¨´æˆ‘å€‘ä»€éº¼ï¼Œç›¸ä¿¡å®ƒå°æ„Ÿèˆˆè¶£ React ä½†æ˜¯ä¸æ˜¯å¾ˆç­è§£çš„äººå¯ä»¥æœ‰å€‹æ„Ÿæ€§çš„ç­è§£ã€‚\nä»€éº¼æ˜¯ Reactï¼ˆå€‹äººè¦‹è§£/å®˜æ–¹ç°¡ä»‹è½‰è¿°ï¼‰ å®ƒåªåš UI å±¤é¢çš„äº‹ï¼Œä½ å¯ä»¥ç†è§£ç‚ºæ˜¯ Web Component çš„ç‰¹æ®Šå¯¦ç¾ Virtual DOMï¼Œå°±ä¸€å€‹å­—ï¼šâ€œå¿«â€ï¼ŒåŒæ™‚æ”¯æŒæœå‹™ç«¯æ¸²æŸ“ æ•¸æ“šæµï¼Œå–®å‘çš„æ•¸æ“šç¶å®šè¶³å¤ æ‡‰ä»˜å¤§éƒ¨åˆ†çš„æ¥­å‹™å ´æ™¯ï¼ŒåŒæ™‚ä½¿å¾—æ•¸æ“šå’Œäº‹ä»¶çš„æµå‹•è®Šå¾—æ¸…æ™° æ€éº¼é–‹å§‹ç”¨ä¸Š React é€™è£¡æˆ‘å€‘å…ˆä¸ç”¨ Webpackã€gulp é€™äº›é€™éº¼â€œé«˜ç´šâ€çš„å·¥å…·ï¼Œæ–¹ä¾¿å°ç™½å…¥é–€ã€‚ æˆ‘å€‘ç›´æ¥å¼•å…¥å°æ‡‰çš„è…³æœ¬æ›´åŠ æ–¹ä¾¿ï¼Œå¤§æ¦‚æ˜¯é€™æ¨£å­çš„ï¼š\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34; /\u0026gt; \u0026lt;title\u0026gt;React Sample 1\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;container\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;script src=\u0026#34;http://cdn.bootcss.com/babel-core/5.8.34/browser.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;http://cdn.bootcss.com/react/0.14.7/react-with-addons.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;http://cdn.bootcss.com/react/0.14.7/react-dom.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/babel\u0026#34;\u0026gt; var mountNode = document.getElementById(\u0026#39;container\u0026#39;) var HelloMessage = React.createClass({ render: function() { return \u0026lt;div\u0026gt;Hello {this.props.name}\u0026lt;/div\u0026gt; } }) ReactDOM.render(\u0026lt;HelloMessage name=\u0026#34;SASUKE40\u0026#34; /\u0026gt;, mountNode) \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; é€™æ˜¯å®˜ç¶²çš„ç¬¬ä¸€å€‹ç¤ºä¾‹ï¼Œç•¶ç„¶å®˜ç¶²ç•¥å»äº†å¾ˆå¤šæ±è¥¿æ²’èªªã€‚ å…ˆèªªä¸€ä¸‹ä¸Šé¢ä»£ç¢¼æˆ‘åŠ äº†çš„æ±è¥¿ï¼š\nbrowser.js æ˜¯ babel çš„ç€è¦½å™¨ç‰ˆæœ¬ï¼Œbabel æ˜¯ä¸€å€‹å¾ˆé…·çš„æ±è¥¿ï¼Œè‡ªå·± Google ä¸‹å°±çŸ¥é“æœ‰å¤šé…·ã€‚æç¤ºä¸€ä¸‹ï¼Œåƒè¬åˆ¥æ€¥è‘—ç”¨ babel6ï¼Œä½ æœƒç”¨å“­çš„~ react å°±ä¸å¿…å¤šèªªäº†ï¼Œæˆ‘å€‘çš„ä¸»è§’ react-dom æ˜¯æœ€è¿‘å¾ react æ‹†å‡ºä¾†çš„ï¼Œä»¥å‰æ˜¯åŒ…åœ¨ react ä¸­çš„ ç´°å¿ƒçš„æœ‹å‹å¯èƒ½çœ‹åˆ° type=\u0026quot;text/babel\u0026quot; é€™å€‹å¥‡æ€ªçš„é¡å‹å±¬æ€§ï¼Œå…¶å¯¦å®ƒæ˜¯ç‚ºäº†è®“ babel èƒ½å»è½‰æ› jsx æˆç€è¦½å™¨è®€å¾—æ‡‚å…¼å®¹è¼ƒå¥½çš„ JavaScript\nç¤ºä¾‹åˆæ­¥è¬›è§£ ç‚ºä»€éº¼èªªåˆæ­¥å‘¢ï¼Ÿå› ç‚ºæ·±æŒ–åº•å±¤å…·é«”çš„å‹•ä½œï¼Œå¯èƒ½å¾ˆå¤šäººéƒ½æœƒæšˆï¼Œæ‰€ä»¥åªè¬›è¡¨å±¤æˆ‘å€‘çœ‹çš„åˆ°çš„æ±è¥¿ã€‚\nç¬¬ä¸€å€‹å®˜æ–¹ç¤ºä¾‹ä¸»è¦åˆ†æˆå…©å€‹æ­¥é©Ÿï¼š\nå‰µå»º React é¡ï¼Œä½¿ç”¨ React.createClass å‰µå»ºï¼Œå‚³å…¥ä¸€å€‹ objectï¼Œ é€™å€‹ object æœ‰å€‹æˆå“¡å±¬æ€§ render è¿”å› jsx ç”¨ ReactDOM å¦‚æ¸²æŸ“ä¸¦æ›è¼‰åˆ°æŸå€‹å…·é«”çš„ DOM ç¯€é»ä¸Š é¡å¤–çš„ Tipï¼šåœ¨é€™è£¡çš„ \u0026lt;div\u0026gt;Hello {this.props.name}\u0026lt;/div\u0026gt; é€™ä¸€éƒ¨åˆ†ä¸¦ä¸æ˜¯ HTMLï¼Œè€Œæ˜¯è²¨çœŸåƒ¹å¯¦çš„ JavaScriptï¼Œä¸¦ä¸”å‰µå»ºå‡ºä¾†å°è±¡æ˜¯ React å¯¦ä¾‹ï¼Œä¸¦ä¸æ˜¯ HTML çš„ DOM ç¯€é»ã€‚\nä½¿ç”¨ React åœ¨é€™å€‹ç¤ºä¾‹çš„å¥½è™• å¯ä»¥è‡ªå®šç¾©æ¨™ç±¤å±¬æ€§ï¼Œåœ¨æ¸²æŸ“çš„æ™‚å€™å¯ä»¥æ’å…¥åˆ°å…§å®¹ä¸­\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34; /\u0026gt; \u0026lt;title\u0026gt;React Sample 2\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;container\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;script src=\u0026#34;http://cdn.bootcss.com/babel-core/5.8.34/browser.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;http://cdn.bootcss.com/react/0.14.7/react-with-addons.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;http://cdn.bootcss.com/react/0.14.7/react-dom.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/babel\u0026#34;\u0026gt; var mountNode = document.getElementById(\u0026#39;container\u0026#39;) var Timer = React.createClass({ getInitialState: function() { return { secondsElapsed: 0 } }, tick: function() { this.setState({ secondsElapsed: this.state.secondsElapsed + 1 }) }, componentDidMount: function() { this.interval = setInterval(this.tick, 1000) }, componentWillUnmount: function() { clearInterval(this.interval) }, render: function() { return \u0026lt;div\u0026gt;éå»äº†ï¼š{this.state.secondsElapsed}ç§’\u0026lt;/div\u0026gt; } }) ReactDOM.render(\u0026lt;Timer /\u0026gt;, mountNode) \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; é€™å€‹ç¤ºä¾‹å¤šäº†å¥½å¤šï¼š\ngetInitialState æ˜¯ä¸€å€‹é—œéµçš„æˆå“¡å±¬æ€§ï¼Œå®ƒå¯ä»¥åˆå§‹åŒ– stateï¼Œåœ¨ render ä¸­å¯ä»¥èª¿ç”¨ this.state.xxx å°±èƒ½æ‹¿åˆ° tick æ˜¯ä¸€å€‹è‡ªå®šç¾©çš„æˆå“¡å±¬æ€§ï¼Œå…¶ä¸­ this.setState æ˜¯ React é¡çš„é—œéµæ–¹æ³•ï¼Œå¯ä»¥ä¿®æ”¹ state çš„å€¼ componentDidMount é¡§åæ€ç¾©ï¼Œåœ¨æ›è¼‰å¾ŒåŸ·è¡Œä¸€äº›æ±è¥¿ï¼Œé€™è£¡æ˜¯å¼„äº†å€‹å®šæ™‚å™¨ componentWillUnmount ä¹Ÿé¡§åæ€ç¾©ï¼Œå°‡è¦å¸è¼‰çš„æ™‚å€™åšé»äº‹æƒ…ï¼Œè‰¯å¥½çš„ç·¨ç¢¼ç¿’æ…£ï¼Œé€™è£¡æ¸…é™¤å®šæ™‚ ç¤ºä¾‹ 3 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34; /\u0026gt; \u0026lt;title\u0026gt;React Sample 3\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;container\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;script src=\u0026#34;http://cdn.bootcss.com/babel-core/5.8.34/browser.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;http://cdn.bootcss.com/react/0.14.7/react-with-addons.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;http://cdn.bootcss.com/react/0.14.7/react-dom.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/babel\u0026#34;\u0026gt; var mountNode = document.getElementById(\u0026#39;container\u0026#39;) var TodoList = React.createClass({ render: function() { var createItem = function(item) { return \u0026lt;li key={item.id}\u0026gt;{item.text}\u0026lt;/li\u0026gt; } return \u0026lt;ul\u0026gt;{this.props.items.map(createItem)}\u0026lt;/ul\u0026gt; } }) var TodoApp = React.createClass({ getInitialState: function() { return { items: [], text: \u0026#39;\u0026#39; } }, onChange: function(e) { this.setState({ text: e.target.value }) }, handleSubmit: function(e) { e.preventDefault() var nextItems = this.state.items.concat([ { text: this.state.text, id: Date.now() } ]) var nextText = \u0026#39;\u0026#39; this.setState({ items: nextItems, text: nextText }) }, render: function() { return ( \u0026lt;div\u0026gt; \u0026lt;h3\u0026gt;TODO\u0026lt;/h3\u0026gt; \u0026lt;TodoList items={this.state.items} /\u0026gt; \u0026lt;form onSubmit={this.handleSubmit}\u0026gt; \u0026lt;input onChange={this.onChange} value={this.state.text} /\u0026gt; \u0026lt;button\u0026gt;{\u0026#39;Add #\u0026#39; + (this.state.items.length + 1)}\u0026lt;/button\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;/div\u0026gt; ) } }) ReactDOM.render(\u0026lt;TodoApp /\u0026gt;, mountNode) \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; é—œéµé»ï¼š\næ¨™ç±¤å¯ä»¥åµŒå¥— å¯ä»¥äº›ä¸€äº›äº‹ä»¶ï¼Œä»¥è‡ªå®šç¾©äº‹ä»¶å‡½æ•¸é«”ç¾ï¼Œä¸ç®¡é€™è£¡çš„æ˜¯ JavaScript çš„äº‹ä»¶ï¼Œä¸¦ä¸æ˜¯ DOM ç¯€é»ä¸Šå®šç¾©çš„ åˆ—è¡¨çµ„ä»¶å®šç¾©çš„ä¸€ç¨®æ¨è–¦å¯«æ³•ï¼šthis.props.items.map å‚³å…¥å–®å€‹çµ„ä»¶ ç¤ºä¾‹ 4 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34; /\u0026gt; \u0026lt;title\u0026gt;React Sample 4\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div id=\u0026#34;container\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;script src=\u0026#34;http://cdn.bootcss.com/babel-core/5.8.34/browser.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;http://cdn.bootcss.com/react/0.14.7/react-with-addons.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;http://cdn.bootcss.com/react/0.14.7/react-dom.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;http://cdn.bootcss.com/marked/0.3.5/marked.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script type=\u0026#34;text/babel\u0026#34;\u0026gt; var mountNode = document.getElementById(\u0026#39;container\u0026#39;) var MarkdownEditor = React.createClass({ getInitialState: function() { return { value: \u0026#39;Type some *markdown* here!\u0026#39; } }, handleChange: function() { this.setState({ value: this.refs.textarea.value }) }, rawMarkup: function() { return { __html: marked(this.state.value, { sanitize: true }) } }, render: function() { return ( \u0026lt;div className=\u0026#34;MarkdownEditor\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;Input\u0026lt;/h3\u0026gt; \u0026lt;textarea onChange={this.handleChange} ref=\u0026#34;textarea\u0026#34; defaultValue={this.state.value} /\u0026gt; \u0026lt;h3\u0026gt;Output\u0026lt;/h3\u0026gt; \u0026lt;div className=\u0026#34;content\u0026#34; dangerouslySetInnerHTML={this.rawMarkup()} /\u0026gt; \u0026lt;/div\u0026gt; ) } }) ReactDOM.render(\u0026lt;MarkdownEditor /\u0026gt;, mountNode) \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; é—œéµé»ï¼š\nå¯ä»¥ä½¿ç”¨è‡ªå®šç¾©å‡½æ•¸ç”¨ä½œéæ¿¾å™¨ï¼Œå¦‚é€™è£¡å¼•å…¥çš„ marked.js è£çš„ marked() React ä¸­çš„è¨­ç½® HTML çš„ APIdangerouslySetInnerHTMLï¼Œè¿”å›å«æœ‰ __html å±¬æ€§çš„ object å³å¯ ä½¿ç”¨ refs æ‹¿åˆ° DOMï¼Ÿæ€è€ƒä¸€ä¸‹æ˜¯ä¸æ˜¯å§~ é¡å¤–çš„ Tipï¼šReact é‚„æ²’æœ‰ 1.0.0ï¼Œå¾ˆå¤šéƒ½ç¶“å¸¸è®ŠåŒ–ï¼Œrefs åœ¨ä»¥å‰ä¸æ˜¯é€™éº¼æ‹¿åˆ°ï¼Œå“­æ­»æˆ‘å€‘é€™äº›å‰ç«¯å°ç™½äº†~\nçµèª å‰ç«¯ä¹‹è·¯é‚„å¾ˆé•·ï¼ŒReact å¤§æ³•å¥½å•Š~\n","date":"2016-03-01T00:00:00Z","image":"https://edward40.com/p/react-official-sample-explanation/react_hu_4d1dc8130d6efcd0.png","permalink":"https://edward40.com/p/react-official-sample-explanation/","title":"React å®˜ç¶²ç¤ºä¾‹è¬›è§£"},{"content":"2015 å¹´éå»çš„å¥½å¿«ï¼Œåœ¨è”æ FM å¸¶äº†å¥½åƒæ²’æœ‰å¤šä¹…çš„æ™‚é–“ï¼Œå…¶å¯¦ä¹Ÿä¸ç®—çŸ­ï¼Œå°‡è¿‘ä¸€å¹´äº†ã€‚\næˆ‘åœ¨çŸ¥ä¹ä¸Šæ”¹äº†ç°½åï¼šâ€œ2015 è¿‡å»äº†ï¼Œ2016 åˆä¼šæ€ä¹ˆæ ·â€¦â€¦â€ï¼Œå…¶å¯¦å° 2016 å¹´é‚„æ˜¯è »å¿å¿‘çš„ï¼Œå› ç‚ºæœ‰è¨ˆç•«æƒ³è¦æ›ä¸€ä»½æ–°çš„å·¥ä½œï¼Œä½†æ˜¯è¦ºå¾—è‡ªå·±æ°´å¹³é‚„ä¸å¤ å¼·ã€‚\nèªªèªªåœ¨è”æ FM çš„ä¸€å¹´å§ï¼æƒ³èµ·ä¾†é‚„æ˜¯ 2015 å¹´ 3 æœˆçš„æ™‚å€™ï¼Œé‚£æ˜¯æˆ‘åœ¨çŸ¥ä¹ä¸Šæœäº†ä¸€ä¸‹â€œäº’è¯ç¶² å»£å·â€ï¼Œç„¶å¾Œçœ‹åˆ°äº†ä¸€å€‹å•é¡Œâ€œå¹¿å·æœ‰å“ªäº›æ¯”è¾ƒé…·çš„äº’è”ç½‘å…¬å¸ï¼Ÿâ€ï¼Œæ³¨æ„åˆ°è”æ FM é€™å®¶å…¬å¸ã€‚\nå¾Œä¾†æˆ‘å°±çœ‹äº†ä¸‹è”æ FM çš„å®˜ç¶²ï¼Œæ‰¾åˆ°äº†å‰ç«¯çš„å´—ä½ï¼Œä½†æ˜¯é‚£å€‹å´—ä½è¦æ±‚å¥½é«˜ï¼Œè¦ 3 å¹´å·¥ä½œç¶“é©—ã€‚é‚£æ™‚çš„è”æ FM è²Œä¼¼ä¸¦ä¸æ‹›æ‡‰å±†ç”Ÿï¼Œä¸éæˆ‘æŠ±è‘—è©¦ä¸€è©¦çš„å¿ƒæ…‹æŠ•äº†ç°¡æ­·ã€‚æ²’æƒ³çš„æ˜¯ï¼Œè¦ä¸åˆ°ä¸€å¤©é›»è©±è¯ç¹«æˆ‘ï¼Œèªªé‚£é‚Šçš„è€å¤§å°æˆ‘æ¯”è¼ƒæ„Ÿèˆˆè¶£ï¼Œå•æˆ‘è¦ä¸è¦å»é¢è©¦ã€‚ç„¶å¾Œæˆ‘å°±å¾ˆå†·éœçš„èªªå¥½ï¼Œå…¶å¯¦å…§å¿ƒå¾ˆæ¿€å‹• â•°(ï¿£ â–½ ï¿£)â•®\nä¸€åˆ‡é‚„æ˜¯è »é †åˆ©çš„ï¼Œæˆ‘é€²äº†è”æ FMï¼Œåšäº†ä¸€åå‰ç«¯ç¢¼è¾²ã€‚é‚£æ™‚å…¬å¸é‚„ä¸æ˜¯å¾ˆå¤šäººï¼Œæˆ‘é€²å»çš„æ™‚å€™ä¹Ÿå°±äº”å…­åäººï¼Œå‰ç«¯ä¹Ÿå°±å°å¸«å’Œæˆ‘åœ¨åšã€‚é›–ç„¶å¤©å¤©è¢«å‚¬è‘—åšç§»å‹•ç«¯çš„é é¢ï¼Œé‚„æœ‰ä¸€äº›å°ˆé¡Œé ï¼Œé‚„è¦å¯«å¾Œç«¯ï¼Œæ²’è¾¦æ³•äººå°‘ä½†æ˜¯é‚£æ™‚çœŸçš„å¥½å¿«æ¨‚ï¼Œå¹¸ç¦æ„Ÿçˆ†è¡¨ã€‚ç¾åœ¨é€²è”æ FM çš„å°å¤¥ä¼´æ‡‰è©²å¾ˆé›£é«”æœƒåœ¨å¢åœ’é‚£ä¸€æ®µçš„æ™‚é–“ã€‚åœ¨å‰µæ¥­å…¬å¸æœ‰ä¸å°‘æ„Ÿè§¸ï¼Œå¥½çš„åœ°æ–¹æ˜¯ä½ å¯ä»¥æ¥è§¸å„å¼å„æ¨£çš„å·¥ä½œï¼Œé™¤äº†åšå‰ç«¯ï¼Œæˆ‘å¶çˆ¾ä¹Ÿåƒèˆ‡è¨­è¨ˆï¼Œä¾‹å¦‚ï¼šé–‹å±åœ–ã€bannerï¼Œåƒèˆ‡å’Œå®¢æˆ¶ç«¯çš„åŒäº‹å…±åŒåšå…§ç½®ç€è¦½å™¨çš„æ¥å£ï¼Œå‰å¾Œç«¯ä¸€æ‰‹åŒ…ï¼Œç­è§£å¾ˆå¤šç‡ŸéŠ·çš„æŠ€å·§ï¼Œç”¢å“æ€æƒ³ï¼Œç­‰ç­‰â€¦â€¦æˆ‘åœ¨é€™ä¸€å¹´æˆé•·çš„å¾ˆå¿«ã€‚ä¸å¥½çš„åœ°æ–¹ä¹Ÿå¾ˆå¤šï¼Œä½ æƒ³æŠŠå¾ˆå¤šæ±è¥¿åšåˆ°æ¥µè‡´çš„æ¯”è¼ƒé›£ï¼Œå³ä½¿ä½ æƒ³åšã€‚ä¸€æ–¹é¢æ˜¯å¾ˆå¤šæ™‚å€™ä½ æ˜¯åœ¨å°ä»˜æ¥­å‹™ï¼Œå¦ä¸€æ–¹é¢æ˜¯æˆ‘é€²å»çš„æ™‚å€™å‰ç«¯å¯ä»¥èªªæ˜¯æ²’æœ‰åŸºå»ºçš„ï¼Œå¾ˆå¤šæ±è¥¿éƒ½è¦è‡ªå·±å» Initial buildingï¼Œæ‰€ä»¥æ²’æœ‰åšåˆ°æ¥µè‡´çš„æ¢ä»¶ã€‚ä¾‹å¦‚èªªæ˜¯ä½¿ç”¨ webpackã€gulp å’Œå¾Œç«¯èåˆï¼ŒCDN åŠ é€Ÿï¼Œå‰å¾Œç«¯åˆ†é›¢ï¼ŒDNS é å–ï¼ŒReact å’Œ Vue é ç ”æ‡‰ç”¨ã€‚å…¶ä¸­æœ‰ä¸€å›è »æœ‰æŒ«æ•—æ„Ÿçš„ï¼Œæˆ‘èŠ±äº†æ¥è¿‘å…©å€‹æ˜ŸæœŸåšäº†å‰ç«¯åˆ†äº«æº–å‚™ï¼Œåš PPTï¼Œå¯«é€å­—ç¨¿ï¼Œå¯« Demoï¼Œåˆ†äº«ä¸€å€‹é—œæ–¼â€œWeb Componentâ€çš„ä¸»é¡Œã€‚ä½†æ˜¯ç”±æ–¼å¤§éƒ¨åˆ†åŒäº‹é‚„æ˜¯åšå¾Œç«¯çš„ï¼ˆåœ¨å¾ˆå¤šå¾Œç«¯çœ¼è£ï¼Œå‰ç«¯éƒ½æ˜¯ç©å…·çš„èªªï¼ï¹ï¼œï¼‰ï¼Œæ‰€ä»¥åæ˜ å¹³å¹³ã€‚ è¨€æ­¸æ­£å‚³ï¼Œèªªèªª 2016 å§ï¼æœ€è¿‘é¢äº†å¾ˆå¤šäº’è¯ç¶²å…¬å¸ï¼Œå¤§å¤§å°å°å„å¼å„æ¨£çš„éƒ½æœ‰ï¼Œå…¶å¯¦è »ç´¯çš„ï¼Œç¾åœ¨ä¹Ÿæ‹¿åˆ°äº†å¿ƒå„€çš„ offer äº†ï¼Œå°±å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹åœ¨å»£å·å‰ç«¯é¢è©¦çš„ä¸€äº›æ„Ÿæ‚Ÿ\nå»£å·ç®—æ˜¯æ²’ä»€éº¼å¤§çš„äº’è¯ç¶²å…¬å¸ï¼Œé¨°è¨Šåœ¨æ·±åœ³ï¼Œé˜¿é‡Œåœ¨æ­å·ï¼Œç™¾åº¦åœ¨åŒ—äº¬ã€‚å»£å·å‘¢ï¼Œä¹Ÿå°±æ˜¯ WXGã€MIGã€é˜¿é‡Œ UCã€å”¯å“æœƒã€YYã€ç¶²æ˜“ä¸€é¡ï¼Œé™¤äº†å”¯å“æœƒå’Œ YYï¼Œåœ¨é€™è£¡çš„å¤§å…¬å¸éƒ½æ˜¯åˆ†éƒ¨ã€‚é¢è©¦çš„æ„Ÿè¦ºæ˜¯å»£å·çš„å¤§å…¬å¸å…¶å¯¦éƒ½æ¯”è¼ƒä¸­è¦ä¸­çŸ©ï¼Œè€Œå°å…¬å¸éƒ½æ˜¯æ¯”è¼ƒè·³ã€‚ç‚ºä»€éº¼é€™éº¼èªªå‘¢ï¼Ÿå› ç‚ºå¤§å…¬å¸çš„åˆ†éƒ¨ä¸€èˆ¬ä¾†èªªæœƒæ€ç¶­æ¯”è¼ƒé«”ç³»åŒ–äº†ï¼Œæ›´å¤šçš„æ˜¯ç©©é‡æ±‚é€²ã€‚èˆ‰å€‹ä¾‹å­ï¼ŒMIG çš„å‰ç«¯éƒ¨åˆ†ä¸¦æ²’æœ‰ä»€éº¼ç¡¬æ€§çš„æŠ€è¡“é¸å‹ï¼Œä½ æƒ³ç”¨ React å°±ç”¨ï¼Œæƒ³ç”¨ Vue å°±ç”¨ï¼ŒjQuery éƒ½ okï¼Œç”¨ä»€éº¼æ§‹å»ºå·¥å…·éƒ½å¯ä»¥ï¼Œåªè¦èƒ½å®Œæˆæ¥­å‹™ã€‚å°å…¬å¸ï¼ˆä¸è¨ˆå…¶æ•¸ï¼‰çš„æƒ³æ³•æ¯”è¼ƒè·³ï¼Œä¾‹å¦‚ç”¨æ¯”è¼ƒæ½®çš„ nodejsã€webpackã€pythonã€go ç­‰ç­‰ï¼Œä½†æ˜¯ç¶“å¸¸æœƒåœ¨æŠ€è¡“é¸å‹ä¸Šæ¼‚æµ®ä¸å®šï¼Œç”¨ Express ç™¼ç¾ä¸å¤ å®Œç¾æ›æˆ koa çš„ä¸å°‘ï¼Œç³¾çµç”¨ Reactã€Vue é‚„æ˜¯ Angularï¼Œç”¨äº† Grunt åˆæ› Gulpã€‚å…¶å¯¦æˆ‘çš„çœ‹æ³•æ˜¯ï¼Œä¸è¦ç³¾çµæ¡†æ¶ã€å·¥å…·éˆ~\nç•¶ç„¶ä½ æœƒå•æˆ‘æœ€å¾Œå»å“ªè£¡äº†ï¼Ÿæˆ‘æƒ³æ˜¯å¤©è²“å‰ç«¯ã€‚å¤©è²“çš„å‰ç«¯ç®—æ˜¯æ¥­å‹™æ ¸å¿ƒï¼Œåœ¨é‚£è£¡å¯ä»¥æœ‰ä¸€å€‹å¾ˆå¥½çš„åœ˜éšŠï¼Œå¾ˆç‰›å¾ˆæ£’çš„ä¸Šå¸ã€‚å¤©è²“çš„æŠ€è¡“é¸å‹ï¼ˆReact+babel+gulpï¼‰ä¹Ÿå¾ˆå¸å¼•ç†±æ„›å‰ç«¯çš„äººã€‚åªæ˜¯æœ‰ä¸€é»ï¼Œæˆ‘å¾ˆæ¨ä¸å¾—å»£å·ï¼Œé€™è£¡æœ‰æ»¿æ»¿çš„å›æ†¶ï¼Œçµ¦æˆ‘å¹¸ç¦æ„Ÿå’Œæ­¸å±¬æ„Ÿã€‚æˆ‘æ€•å»äº†æ­å·æœƒä¸ç¿’æ…£ï¼Œç„¶è€Œç‚ºäº†ç†±æ„›çš„å‰ç«¯é‚„æ˜¯å€¼å¾—çš„~ æœ€å¾Œï¼Œã€ŒStay hungry. Stay foolish.ã€\n","date":"2016-02-27T00:00:00Z","image":"https://edward40.com/p/interview-in-guangzhou-2016/guangzhou_hu_df14fe38b44595ac.jpg","permalink":"https://edward40.com/p/interview-in-guangzhou-2016/","title":"2016 å¹´å»£å·å‰ç«¯é¢è©¦ä¹‹æ—…"},{"content":" å®‰è£… apt æºç®¡ç†å·¥å…·ã€æ·»åŠ  nginx å’Œ php çš„å®‰è£…æº apt-get install python-software-properties add-apt-repository ppa:nginx/stable add-apt-repository ppa:ondrej/php5 æ›´æ–°ç³»ç»Ÿè½¯ä»¶ apt-get update å®‰è£… mysql apt-get install mysql-server mysql-client å®‰è£… php åŠå¯¹ mysql çš„æ”¯æŒ apt-get install php5-fpm php5-mysql æ ¹æ®å®é™…éœ€è¦ï¼Œé€‰æ‹©æ€§çš„å®‰è£… php çš„å„ç±»åŠŸèƒ½æ¨¡å— apt-get install php-pear php5-dev php5-curl apt-get install php5-gd php5-intl php5-imagick apt-get install php5-imap php5-mcrypt php5-memcache apt-get install php5-ming php5-ps php5-pspell apt-get install php5-recode php5-snmp php5-sqlite apt-get install php5-tidy php5-xmlrpc php5-xsl å®‰è£… nginx apt-get install nginx ä¿®æ”¹ nginx é»˜è®¤ç«™ç‚¹é…ç½®æ–‡ä»¶ vim /etc/nginx/sites-available/default server { listen 80 default_server; listen [::]:80 default_server ipv6only=on; root /usr/share/nginx/html; index index.php index.html index.htm; server_name server_domain_name_or_IP; location / { try_files $uri $uri/ =404; } error_page 404 /404.html; error_page 500 502 503 504 /50x.html; location = /50x.html { root /usr/share/nginx/html; } location ~ \\.php$ { try_files $uri =404; fastcgi_split_path_info ^(.+\\.php)(/.+)$; fastcgi_pass unix:/var/run/php5-fpm.sock; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; } } ","date":"2016-02-06T00:00:00Z","image":"https://edward40.com/p/php-installation/php_hu_4fbd43a51422ee12.png","permalink":"https://edward40.com/p/php-installation/","title":"Ubuntu å®‰è£ php"},{"content":"å®‰è£ Activator å…ˆä¸‹è¼‰Activator è§£å£“åˆ°D:\\Program Files\\activator-1.3.2 å°‡D:\\Program Files\\activator-1.3.2åŠ åˆ°ç’°å¢ƒè®Šé‡ Path ä¸­ åœ¨ä½ çš„é …ç›®ç›®éŒ„ä¸­åŸ·è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œé©—è­‰æ˜¯å¦å®‰è£æˆåŠŸ\nactivator -help å‰µå»º Play é …ç›® activator new demo play-java cd demo activator å®‰è£ Eclipse æ’ä»¶ Scala IDE åœ¨ Eclipse ä¸­ Install New Software å¢åŠ å®°å‰² Update Siteï¼Œè¨˜å¾—å®‰è£ Play Support\nå‰µå»º Eclipse é …ç›® eclipse with-source=true è·‘èµ·ä¾†çœ‹çœ‹ run åœ¨ç€è¦½å™¨ä¸­æ‰“é–‹http://localhost:9000ï¼Œé …ç›®å°±è·‘èµ·ä¾†äº† â•°(ï¿£ â–½ ï¿£)â•®\n","date":"2015-05-23T00:00:00Z","image":"https://edward40.com/p/play-framework/play_hu_c61a98a4f3ed6a30.jpg","permalink":"https://edward40.com/p/play-framework/","title":"Play Frameworké …ç›®åˆå§‹åŒ–"},{"content":" æ·»åŠ  ppa sudo add-apt-repository ppa:webupd8team/java æ›´æ–°ç³»çµ± sudo apt-get update å®‰è£ java8 sudo apt-get install oracle-java8-installer æª¢æ¸¬æ˜¯å¦æˆåŠŸ java -version çµæœå¦‚ä¸‹\njava version \u0026#34;1.8.0_45\u0026#34; Java(TM) SE Runtime Environment (build 1.8.0_45-b14) Java HotSpot(TM) 64-Bit Server VM (build 25.45-b02, mixed mode) è¨­ç½®ç’°å¢ƒè®Šé‡ sudo apt-get install oracle-java8-set-default ç‰ˆæœ¬åˆ‡æ› sudo update-java-alternatives -s java-8-oracle ","date":"2015-05-23T00:00:00Z","image":"https://edward40.com/p/java8-installation/java8_hu_131caf8842af5c26.jpg","permalink":"https://edward40.com/p/java8-installation/","title":"Ubuntuå®‰è£java8"},{"content":"å¯«é€™ç¯‡æ–‡ç« çš„åˆè¡· æƒ³æƒ³åœ¨è”æ FM å·¥ä½œæ¥è¿‘ 2 å€‹æœˆäº†ï¼Œä¸€ç›´æ²’èƒ½å¥½å¥½ç¸½çµæ˜¯ä¸€å€‹å¾ˆå¤§çš„å•é¡Œï¼Œå› æ­¤ä»Šå¤©å°±ä¾†å¯«ä¸€äº›æ±è¥¿ä¾†å›é¡§ä¸€ä¸‹éå»çš„å·¥ä½œã€‚\nå·¥ä½œåˆ—è¡¨ è”æé”äºº HTML5 éŠæˆ² é‹ç‡Ÿå¾Œè‡ºÂ·æ¨™è¨˜æ’­å®¢åº« å¾®ä¿¡éŒ„éŸ³ éŒ„éŸ³æŒ‡å— HTML5 ç¨‹å£ç·šä¸‹æ–‡è—åº— HTML5 ä¸»æ’­è³‡æ–™æ”¶é›†é  HTML5 Young æ¦œ HTML5 æ¨å»£å¾Œè‡º å·¥ä½œä¸­ç”¨åˆ°çš„æ±è¥¿ è”æé”äºº HTML5 éŠæˆ²ä½¿ç”¨ egretï¼ˆç™½é·ºï¼‰å¼•æ“ï¼Œé€™å€‹å¼•æ“æ˜¯ä½¿ç”¨TypeScriptä¾†å¯«ã€‚TypeScript æ„Ÿè¦ºæŒºå¥½çš„ï¼Œé¡¯å¼é¡å‹ä¸¦ä¸”æ¥è¿‘ ES6 è¦ç¯„ï¼Œä½†æ˜¯æœ‰ä¸€é»æ¯”è¼ƒå‘çš„æ˜¯ï¼Œå°æ–¼ç¬¬ä¸‰æ–¹åº«çš„å¼•å…¥ä¸æ˜¯å¾ˆç†æƒ³ï¼Œè¡¨é¢è€Œè¨€å°±æ˜¯å¼•ç”¨çš„ç¬¬ä¸‰æ–¹åº«å¾Œç¶´ç‚ºd.tsã€‚\næœ‰æ™‚é–“å°±è¬è¬TypeScriptçš„ä¸€äº›æ±è¥¿å’Œå¤§å®¶åˆ†äº«ã€‚\né‹ç‡Ÿå¾Œè‡º é‹ç‡Ÿå¾Œè‡ºä½¿ç”¨çš„æ˜¯å…¬å¸è‡ªå·±ç·¨å¯«çš„ Java å¾Œç«¯æ¡†æ¶ï¼Œä¸€é–‹å§‹æˆ‘ä¸€ç›´åœ¨ç†Ÿæ‚‰é€™å€‹æ¡†æ¶ï¼Œè¦ºå¾—å¾ˆä¸é©ç”¨ï¼Œä½†æ˜¯ç•¶æˆ‘ä»”ä»”ç´°ç´°çš„çœ‹éå¾ŒåˆæŒºæ¬½ä½©å‰äººçš„æ™ºæ…§ã€‚åœ¨ç†Ÿæ‚‰å®Œé …ç›®ä¹‹å¾Œå°±é–‹å§‹ç·¨å¯«è‡ªå·±çš„åŠŸèƒ½æ¨¡å¡Šäº†ã€‚é€™å€‹é …ç›®æ˜¯ä½¿ç”¨è‡ªå·±å®šç¾©çš„ MVC æ¡†æ¶ï¼Œå®šç¾©äº†ä¸€äº› Controller è¦ç¯„ï¼Œå·²ç¶“å°æ‡‰ View çš„è¦å‰‡ï¼Œä½¿ç”¨çš„æŒä¹…åŒ–æ¡†æ¶æ˜¯MyBatisã€‚Model å° MyBatis é€²è¡Œå°è£ï¼Œå¯åœ¨é¸æ“‡åœ¨è‡ªå‹•äº‹å‹™å’Œè‡ªè¡Œäº‹å‹™è™•ç†ï¼Œé»˜èªç‚ºè‡ªå‹•äº‹å‹™ã€‚ç¸½é«”è€Œè¨€ï¼Œåœ¨å¯«å®Œä¸€å€‹åŠŸèƒ½æ¨¡å¡Šä¸¦ä½¿ä¹‹ä¸Šç·šç®—æ˜¯ä¸€æ¬¡å®Œæ•´çš„æ¡†æ¶â€œéŠè¦½â€ã€‚\né †ä¾¿æä¸€å€‹ï¼Œéƒ¨ç½²é€™ä¸€å¡Šä¹Ÿæ˜¯æŒºæœ‰è¶£çš„ã€‚å…¬å¸åœ¨å®‰å…¨æ–¹é¢æŒºæ³¨é‡çš„ï¼Œå› æ­¤æ¯å€‹äººè¦å°‡é …ç›®éƒ¨ç½²ä¸Šå»éƒ½å¿…é ˆç¶“éè·³æ¿æ©Ÿã€‚æ„Ÿè¬å…¬å¸â€œè¬èƒ½â€çš„é‹ç¶­å¤§å¤§ï¼Œåœ¨è·³æ¿æ©Ÿä¸Šæœ‰å°æ‡‰æ›è¼‰çš„ç›®éŒ„ï¼Œå› æ­¤éƒ¨ç½²ä¹Ÿä¸æ˜¯å¤ªéº»ç…©ã€‚æˆ‘ä½¿ç”¨çš„æ˜¯ XShellï¼Œå°æ‡‰çš„ä¸Šå‚³ä¸‹è¼‰å‘½ä»¤ä¹Ÿå°±æ˜¯rzå’Œszã€‚\npo ä¸€ä¸‹æœ€è¿‘å­¸ç¿’çš„é‹ç¶­çŸ¥è­˜ï¼ˆæœç„¶ Linux èª²éƒ½ç™½ä¸Šäº†ï¼Œåªå­¸åˆ° ls å’Œ sudoï¼‰ ä»¥ä¸‹å‡ºæ–¼å®‰å…¨è€ƒæ…®ï¼Œå…¨éƒ¨ command éƒ½éš±å»æ•æ„Ÿå­—ç¬¦\nssh -p port host@192.168.1.1 mysql -uname -p -h 192.168.1.1 -P port database_name é †ä¾¿ po ä¸€ä¸‹æœ€è¿‘è‡ªå­¸çš„ mysql æ¬Šé™è™•ç†\nservice mysql stop /usr/bin/mysqld_safe --skip-grant-tables \u0026amp; use mysql; INSERT INTO user VALUES (\u0026#39;localhost\u0026#39;,\u0026#39;root\u0026#39;,password(\u0026#39;\u0026#39;),\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;); INSERT INTO user VALUES (\u0026#39;127.0.0.1\u0026#39;,\u0026#39;root\u0026#39;,password(\u0026#39;\u0026#39;),\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;); INSERT INTO user VALUES (\u0026#39;::1\u0026#39;,\u0026#39;root\u0026#39;,password(\u0026#39;\u0026#39;),\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;); INSERT INTO user VALUES (\u0026#39;%\u0026#39;,\u0026#39;root\u0026#39;,password(\u0026#39;\u0026#39;),\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;Y\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;0\u0026#39;,\u0026#39;\u0026#39;,\u0026#39;\u0026#39;); flush privileges; ps aux | grep \u0026#39;mysql\u0026#39; kill -9 mysqld-pid service mysql start vim /etc/mysql/my.cnf bind-address = 127.0.0.1 ä¸Šé¢é€™äº›æœ‰çš„æ˜¯ç‚ºäº†é ç¨‹è¨ªå•Mysqlï¼Œçœ‹ä¸æ‡‚å°±ç®—äº†ï¼Œé—œæ–¼é‹ç¶­ä»¥å¾Œå†è£œã€‚\nå¾®ä¿¡éŒ„éŸ³ åšå¾®ä¿¡å½•éŸ³è®“æˆ‘çŸ¥é“äº† Redis å¯ä»¥ç”¨ä¾†åšæœå‹™ï¼Œé€™ç¨®æ–¹å¼çœŸçš„å¾ˆâ€œæ½®â€ï¼Œé€™å€‹é …ç›®æ˜¯ä½¿ç”¨Play Frameworkä½œç‚ºå¾Œç«¯çš„ã€‚ ä¸‹é¢è¬›è¬›é€™å€‹Play Framework\nPlay Frameworkå’ŒRuby on Railséå¸¸ç›¸ä¼¼ï¼Œç®—æ˜¯ Java çš„ Railsï¼Œç·¨å¯«æ±è¥¿ç›¸ç•¶æ•æ·ï¼Œé…ç½®å¾ˆéˆæ´»ï¼Œç¼ºé»ä¹Ÿæœ‰ï¼Œæ¨¡ç‰ˆå¼•æ“ç•¥å‘ã€‚é€™å€‹æ¡†æ¶æœ‰å¾ˆå¤šé…å¥—çš„çµ„ä»¶ï¼ŒEclipse çš„ Scala IDEï¼ŒPlay Supportï¼Œsbtï¼Œactivatorï¼Œç­‰ç­‰ã€‚ä¸€äº›å¯¦è¸ï¼Œæ€éº¼ç·¨å¯« Annotation å¯¦ç¾ç°¡å–®æ¬Šé™ï¼Œæ€éº¼ç”¨ lessï¼Œæ€éº¼æ‰“åŒ…éƒ¨ç½²ï¼Œç·¨å¯« reload è…³æœ¬ç­‰ç­‰ã€‚ç™¼ç¾å¥½å¤šæ±è¥¿è¦è£œï¼Œ5555â€¦â€¦\néŒ„éŸ³æŒ‡å— é€™æ˜¯ä¸€å€‹ç¿»é  HTML5ï¼Œå› ç‚ºæ˜¯ä¸€å€‹éœæ…‹çš„é …ç›®ï¼Œè€Œä¸”æ¯”è¼ƒç¨ç«‹ï¼Œæ‰€ä»¥é€™å€‹é …ç›®ç”¨äº†å¾ˆå¤šå‰ç«¯çš„æ±è¥¿ï¼Œåˆ—è¡¨å¦‚ä¸‹ï¼š\nyeoman glup webstorm bower browser-syncï¼ˆé€™æ˜¯å€‹éå¸¸å¥½çš„æ±è¥¿ï¼‰ n å¤šçš„ gulp æ’ä»¶ é …ç›®éƒ¨ç½²åœ¨nginxä¸‹ã€‚\né—œæ–¼ç§»å‹•ç«¯ head çš„è¼ƒå¥½è™•ç†\n\u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34; /\u0026gt; \u0026lt;title\u0026gt;Title\u0026lt;/title\u0026gt; \u0026lt;meta name=\u0026#34;description\u0026#34; content=\u0026#34;description\u0026#34; /\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;target-densitydpi=device-dpi, width=640px, user-scalable=no\u0026#34; /\u0026gt; \u0026lt;!-- åˆ é™¤è‹¹æœé»˜è®¤çš„å·¥å…·æ å’Œèœå•æ  --\u0026gt; \u0026lt;meta name=\u0026#34;apple-mobile-web-app-capable\u0026#34; content=\u0026#34;yes\u0026#34; /\u0026gt; \u0026lt;!-- è®¾ç½®è‹¹æœå·¥å…·æ é¢œè‰² --\u0026gt; \u0026lt;meta name=\u0026#34;apple-mobile-web-app-status-bar-style\u0026#34; content=\u0026#34;black\u0026#34; /\u0026gt; \u0026lt;!-- å¿½ç•¥é¡µé¢ä¸­çš„æ•°å­—è¯†åˆ«ä¸ºç”µè¯ï¼Œå¿½ç•¥emailè¯†åˆ« --\u0026gt; \u0026lt;meta name=\u0026#34;format-detection\u0026#34; content=\u0026#34;telephone=no, email=no\u0026#34; /\u0026gt; \u0026lt;!-- å¯ç”¨360æµè§ˆå™¨çš„æé€Ÿæ¨¡å¼(webkit) --\u0026gt; \u0026lt;meta name=\u0026#34;renderer\u0026#34; content=\u0026#34;webkit\u0026#34; /\u0026gt; \u0026lt;!-- é¿å…IEä½¿ç”¨å…¼å®¹æ¨¡å¼ --\u0026gt; \u0026lt;meta http-equiv=\u0026#34;X-UA-Compatible\u0026#34; content=\u0026#34;IE=edge\u0026#34; /\u0026gt; \u0026lt;!-- é’ˆå¯¹æ‰‹æŒè®¾å¤‡ä¼˜åŒ–ï¼Œä¸»è¦æ˜¯é’ˆå¯¹ä¸€äº›è€çš„ä¸è¯†åˆ«viewportçš„æµè§ˆå™¨ï¼Œæ¯”å¦‚é»‘è“ --\u0026gt; \u0026lt;meta name=\u0026#34;HandheldFriendly\u0026#34; content=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;!-- å¾®è½¯çš„è€å¼æµè§ˆå™¨ --\u0026gt; \u0026lt;meta name=\u0026#34;MobileOptimized\u0026#34; content=\u0026#34;320\u0026#34; /\u0026gt; \u0026lt;!-- ucå¼ºåˆ¶ç«–å± --\u0026gt; \u0026lt;meta name=\u0026#34;screen-orientation\u0026#34; content=\u0026#34;portrait\u0026#34; /\u0026gt; \u0026lt;!-- QQå¼ºåˆ¶ç«–å± --\u0026gt; \u0026lt;meta name=\u0026#34;x5-orientation\u0026#34; content=\u0026#34;portrait\u0026#34; /\u0026gt; \u0026lt;!-- windows phone ç‚¹å‡»æ— é«˜å…‰ --\u0026gt; \u0026lt;meta name=\u0026#34;msapplication-tap-highlight\u0026#34; content=\u0026#34;no\u0026#34; /\u0026gt; \u0026lt;!-- UCå¼ºåˆ¶å…¨å± --\u0026gt; \u0026lt;meta name=\u0026#34;full-screen\u0026#34; content=\u0026#34;yes\u0026#34; /\u0026gt; \u0026lt;!-- QQå¼ºåˆ¶å…¨å± --\u0026gt; \u0026lt;meta name=\u0026#34;x5-fullscreen\u0026#34; content=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;!-- 360å¼ºåˆ¶å…¨å± --\u0026gt; \u0026lt;meta name=\u0026#34;360-fullscreen\u0026#34; content=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;!-- UCåº”ç”¨æ¨¡å¼ --\u0026gt; \u0026lt;meta name=\u0026#34;browsermode\u0026#34; content=\u0026#34;application\u0026#34; /\u0026gt; \u0026lt;!-- QQåº”ç”¨æ¨¡å¼ --\u0026gt; \u0026lt;meta name=\u0026#34;x5-page-mode\u0026#34; content=\u0026#34;app\u0026#34; /\u0026gt; \u0026lt;!-- é€‚åº”ç§»åŠ¨ç«¯end --\u0026gt; \u0026lt;!-- Place favicon.ico in the root directory --\u0026gt; \u0026lt;link rel=\u0026#34;shortcut icon\u0026#34; type=\u0026#34;image/png\u0026#34; href=\u0026#34;/assets/favicon.ico\u0026#34; /\u0026gt; \u0026lt;/head\u0026gt; é–å®šåœ¨ 640px å°±ä¸ç”¨æ“”å¿ƒä»€éº¼äº†ï¼Œè©±èªªé‚£äº›é€™éº¼å¯«çš„æ˜¯è¦åšä»€éº¼\n\u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width,target-densitydpi=high-dpi,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no\u0026#34; /\u0026gt; ç¨‹å£ç·šä¸‹æ–‡è—åº— \u0026amp; ä¸»æ’­è³‡æ–™æ”¶é›†é  é€™å…©å€‹å·®ä¸å¤šï¼Œéƒ½æ˜¯ HTML5 è¡¨å–®ï¼Œå¾Œç«¯ä¹Ÿæ˜¯Play Frameworkï¼ˆçœŸçš„æŒºå¥½ç”¨çš„æ¡†æ¶ï¼‰ï¼Œç”¨äº†ä¸€ä¸‹ç™¾åº¦çµ±è¨ˆå’Œé¨°è¨Šåˆ†æï¼Œæ„Ÿè¦ºä¸éŒ¯ã€‚\nYoung æ¦œ HTML5 é€™å€‹ä»»å‹™æ‹–äº†æˆ‘ä¸€å€‹å¤šæ˜ŸæœŸï¼Œæœ¬ä¾†é è¨ˆå…©ä¸‰å¤©çµæœï¼Œçµæœè¨­è¨ˆå¸«å’Œå¸‚å ´ä¸€ç›´åœ¨ç³¾çµè¨­è¨ˆéœ€æ±‚ï¼Œä¸éè¦ä¸æ˜¯é€™æ¨£ä¹Ÿä¸æœƒæœ‰ä¸€å€‹å¥½ç”¨çš„æ¨å»£å¾Œè‡º â•®(â•¯â–½â•°)â•­ï¼Œ é€™å€‹æ±è¥¿ç”¨äº†Swiperï¼Œå¾ˆè´Šçš„è§¸æ‘¸æ»‘å‹•æ’ä»¶ï¼Œå°ç§»å‹•ç«¯æ”¯æŒå¾ˆæ£’ã€‚\né€™å€‹ HTML5 æ˜¯å¯ä»¥é…ç½®ä¿®æ”¹çš„ï¼Œåªè¦åœ¨å¾Œè‡ºè¨­ç½®å¥½å°±èƒ½ç”Ÿæˆæ–°çš„ä¸€æœŸäº†ï¼Œç¸½é«”ä¾†èªªé‚„ okã€‚\næ¨å»£å¾Œè‡º é€™å€‹ä¹Ÿèƒ½è¬›ä¸€å¤§å †ï¼Œæš«æ™‚ä¸è¬›äº†ï¼Œä¼‘æ¯ä¼‘æ¯~~\n","date":"2015-05-23T00:00:00Z","image":"https://edward40.com/p/work-experience/work_hu_e8393d5a7f861e74.jpg","permalink":"https://edward40.com/p/work-experience/","title":"å·¥ä½œå¿ƒå¾—"}]