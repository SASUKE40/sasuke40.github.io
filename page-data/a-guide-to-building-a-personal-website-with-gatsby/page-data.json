{"componentChunkName":"component---src-templates-blog-post-js","path":"/a-guide-to-building-a-personal-website-with-gatsby/","result":{"data":{"site":{"siteMetadata":{"title":"Edward Elric"}},"markdownRemark":{"id":"83dbf0a2-fa80-5edf-bf45-9bf58515d6b2","excerpt":"前言 相信大部分程序员都有自己个人网站，或者是托管在各大平台上的技术博客。 大概在大一的时候我也萌生搭建个人博客的想法，最早还是比较流行自己买一个 VPS、域名，然后搭建 WordPress…","html":"<h1>前言</h1>\n<p>相信大部分程序员都有自己个人网站，或者是托管在各大平台上的技术博客。</p>\n<p>大概在大一的时候我也萌生搭建个人博客的想法，最早还是比较流行自己买一个 VPS、域名，然后搭建 <strong>WordPress</strong>。不过由于没续费，东西也没妥善备份也不知道去哪里了。\n接着网络兴起<strong>轻博客</strong>，我想着自己塔多不方便，就用了<strong>点点网</strong>写自己的博客，在上面沉淀不少文章，然而点点网在 2016 年也关闭了。</p>\n<p>自建和博客平台都不靠谱，我便转向了 <strong>GitHub Pages</strong>，正好那一阵流行用 <code class=\"language-text\">hexo</code> 生成静态博客站点，于是就搭建了一个放了些文章。其实放到现在来看主题还是挺好看的，不过由于我没有备份的良好习惯，有几篇文章的 md 文件被我弄丢了。</p>\n<p>因此，这次我把整个站点备份了一下（学乖了），并在上面盖新的个人网站。因为比较熟悉 React 的缘故，这次用的是 <code class=\"language-text\">Gatsby</code> 进行搭建。</p>\n<h1>准备工作</h1>\n<ol>\n<li>安装 Gatsby CLI</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g gatsby-cli</code></pre></div>\n<ol start=\"2\">\n<li>创建项目</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">gatsby new</code></pre></div>\n<p>目录结构如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.\n├── LICENSE\n├── README.md\n├── content\n├── gatsby-browser.js\n├── gatsby-config.js\n├── gatsby-node.js\n├── node_modules\n├── package-lock.json\n├── package.json\n├── src\n└── static</code></pre></div>\n<ol start=\"3\">\n<li>本地开发</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">gatsby develop</code></pre></div>\n<ol start=\"4\">\n<li>常用的插件</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"gatsby-plugin-feed\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.3.25\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"gatsby-plugin-google-analytics\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.1.31\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"gatsby-plugin-manifest\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.2.34\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"gatsby-plugin-offline\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.0.30\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"gatsby-plugin-react-helmet\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.1.18\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"gatsby-plugin-sharp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.3.10\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"gatsby-plugin-typography\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.3.20\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"gatsby-remark-copy-linked-files\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.1.33\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"gatsby-remark-images\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.1.39\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"gatsby-remark-prismjs\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.3.28\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"gatsby-remark-responsive-iframe\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.2.30\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"gatsby-remark-smartypants\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.1.19\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"gatsby-source-filesystem\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.1.43\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"gatsby-transformer-remark\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.6.45\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"gatsby-transformer-sharp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.3.9\"</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h1>配置及开发</h1>\n<h2>配置</h2>\n<p>首先最重要的就是 <code class=\"language-text\">gatsby-config.js</code> 文件了，我们需要在里面启用上述安装的插件，配置可以到 <a href=\"https://github.com/SASUKE40/sasuke40.github.io\">sasuke40.githu.io</a> 查看。</p>\n<p>还有得去 <a href=\"https://analytics.google.com/\">google analytics</a> 配置一下记录站点的访问信息。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.91549295774648%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAABXklEQVQ4y6VU2WrDMBD0/39Sn/sBeehBIS00jvEVX7V1S55qZewkhdCoXRgskDTszKyc9KNA3XEwziCkgrEOSpuwlkpHIzFKYDYCnHHU1Qlt20JKCap5nqORWOfC5fyU4eXtGfv9O/I8h9Yazu/RoZhKGOdQQqKeehyKDNkxQ1GUEELAGBNPqP0lzA7VoJEWLcqiAOfif5KXLhY0TYuqqlGW5R8J7ULo3Ox9M15ugXEcw5o8XBFNSLDW+u4q9H2/JX1JeJeHPwkp4WmaAiFjbEv73k7PkoNsF7wjyURGX6XUdviy01sdX3VIF9I0DT7eqigPjbE4HI5BMnXG/YwSyIq75/CcsgtjY+SXJ5NhsEnyMAwh8aiUaWSodh8aDzuDkWlPyK5kLqHMv+LcodV4/WR4fBrRDQxD322BRD291R+SJlgPMTXoWo+uD/O4vucoyVTkWeN/XWTluvmX9/wNjko5tkPieZQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/520096670c0a9ed36b22c9c9a2d2951d/799d3/google_analytics.png\"\n        srcset=\"/static/520096670c0a9ed36b22c9c9a2d2951d/00d96/google_analytics.png 148w,\n/static/520096670c0a9ed36b22c9c9a2d2951d/0b23c/google_analytics.png 295w,\n/static/520096670c0a9ed36b22c9c9a2d2951d/799d3/google_analytics.png 590w,\n/static/520096670c0a9ed36b22c9c9a2d2951d/2a3d6/google_analytics.png 885w,\n/static/520096670c0a9ed36b22c9c9a2d2951d/ae92f/google_analytics.png 1180w,\n/static/520096670c0a9ed36b22c9c9a2d2951d/7b787/google_analytics.png 1704w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n配置结束会给你个跟踪 ID，在配置文件 <code class=\"language-text\">gatsby-plugin-google-analytics</code> 下修改就行。</p>\n<h2>开发 Dark Mode</h2>\n<p>其实上面配置完成基本上站点就能用了，不过 Gatsby 最好玩的是他的灵活。自带的没有夜间模式，下面我快速介绍一下怎么开发。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 125.70579494799405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsSAAALEgHS3X78AAAC/0lEQVQ4y61VS0/bQBD234QTF4S4BAmu/BCkit/QGxJU6iVSJRClLTQkcZz4Fdtx3vj9/jqzUUhAaQqoK43m4d3Zmflm1hI+uMqqQkV8ndgmRVGEi4sLyLKM29tbBEEA13UxmUzQ7XaFvV6v4+rqCo1GQ+wJw5BOlyjHLgrXRjG0UY4GqIockuM42NnZQe3oCLu7uzg+Psbe3h5qtRoODg5wdnaG09NT7O/v4+TkBIeHh/h0fi5iCm/q8Otf4F9+RkxyFUeQKgozTVLEFGlRFOCI4zhGmqYURIU8L5CTfaGXKPKcbPkiSYpQ0MgRVJFdAjssImRlIVLJshRh4BN58OYzuihEEpM9TYhHdGEoyuJ5Hny6eE6ynyRCFjVMsgRfry+h2iYaD7/R7up4kHXcNbq4e+yhoZho9iy0VAv3sgndtDEZjzEcDkWtHdsWNCKdMxApz7wnpFmGwPcRxBn8FHQr4CUV8QpPcYkgXfDyH+hLm83rzfD6E7XLFhIRbjwozm4+xPuZbXQYpQW+qx5+ah6ulRlulDm+yTMY42gZ0NaIXl5EKSfUMrbjYjSeYO7Hwpjm1C7lKsq3LhEh91er1YSu6+gqHSiKgk5HRrvdQq/XE9PS6XSeqd1uo9lsiglSVVXofIblhNpH4ia1LEuQbTtwBgMMiHiCmNvUEsy5Rfr9/vM31rl1WOazPnXIFpQ/tkTKIYHygwBRBhFadoDHvo973YM1jbci/RqMZ4dJmkHtUzrOGO6URi4p4EU5Yrrobw54ItblpS5S5oegI7ehaSpMXUOvq0An2bL60AgoBkvTNMGZDMMQOteWweCasn06nS4cphSh2beo4BYM04RCqK5AsgUQS27Sdz7MOnO2ZTSy66WR/hcYq8amDv5lBOgQKE0rQKPviTq+FZClo5VDSlk2XOj2BM40wMTP6EEtX2x6z7RICYHCYJiGhtl0vDGd9yyJIQ+CUDz9Ab3YPNspPftZUX0sQv6P8AgxmYwotYvhzqGPY/FPebfDtyD4nvUH9vl5l64IgsYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/597186f3191b7d2b970b2c4434970b74/799d3/add_dark_mode.png\"\n        srcset=\"/static/597186f3191b7d2b970b2c4434970b74/00d96/add_dark_mode.png 148w,\n/static/597186f3191b7d2b970b2c4434970b74/0b23c/add_dark_mode.png 295w,\n/static/597186f3191b7d2b970b2c4434970b74/799d3/add_dark_mode.png 590w,\n/static/597186f3191b7d2b970b2c4434970b74/2a3d6/add_dark_mode.png 885w,\n/static/597186f3191b7d2b970b2c4434970b74/ae92f/add_dark_mode.png 1180w,\n/static/597186f3191b7d2b970b2c4434970b74/44860/add_dark_mode.png 1346w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<ol>\n<li>注入全局函数\n在 src 目录下新建 <code class=\"language-text\">html.js</code>，开发一个用于控制主题的全局函数</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token operator\">&lt;</span>script\n  dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n    __html<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    (function() {\n      window.__onThemeChange = function() {};\n      function setTheme(newTheme) {\n        window.__theme = newTheme;\n        preferredTheme = newTheme;\n        document.body.className = newTheme;\n        window.__onThemeChange(newTheme);\n      }\n\n      var preferredTheme;\n      try {\n        preferredTheme = localStorage.getItem('theme');\n      } catch (err) { }\n\n      window.__setPreferredTheme = function(newTheme) {\n        setTheme(newTheme);\n        try {\n          localStorage.setItem('theme', newTheme);\n        } catch (err) {}\n      }\n\n      var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');\n      darkQuery.addListener(function(e) {\n        window.__setPreferredTheme(e.matches ? 'dark' : 'light')\n      });\n\n      setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));\n    })();\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<ol start=\"2\">\n<li>开发 Toggle 组件</li>\n</ol>\n<p>准备好两张 Icon 图片，然后把 <a href=\"https://github.com/aaronshaf/react-toggle/\">react-toggle</a> 魔改一下就行。</p>\n<ol start=\"3\">\n<li>修改 layout</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">{</span>\n  theme <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Toggle\n      icons<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n        checked<span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n            <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>moon<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>16<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>16<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>presentation<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> pointerEvents<span class=\"token operator\">:</span> <span class=\"token string\">'none'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        unchecked<span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n            <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>sun<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>16<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>16<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>presentation<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> pointerEvents<span class=\"token operator\">:</span> <span class=\"token string\">'none'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      checked<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>theme <span class=\"token operator\">===</span> <span class=\"token string\">'dark'</span><span class=\"token punctuation\">}</span>\n      onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span>\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">__setPreferredTheme</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>checked <span class=\"token operator\">?</span> <span class=\"token string\">'dark'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'light'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> height<span class=\"token operator\">:</span> <span class=\"token string\">'24px'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"4\">\n<li>编写全局样式\n编写 <code class=\"language-text\">global.css</code> 并在 <code class=\"language-text\">typography.js</code> 导入它，主要工作是给 body 配置 css 变量</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">body</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">--pink</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>255<span class=\"token punctuation\">,</span> 167<span class=\"token punctuation\">,</span> 196<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--bg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">body.light</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">--bg</span><span class=\"token punctuation\">:</span> #ffffff<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--bg-secondary</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>249<span class=\"token punctuation\">,</span> 250<span class=\"token punctuation\">,</span> 251<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--header</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--pink<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--textNormal</span><span class=\"token punctuation\">:</span> #222<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--textTitle</span><span class=\"token punctuation\">:</span> #222<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--textLink</span><span class=\"token punctuation\">:</span> #d23669<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--hr</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsla</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> 0%<span class=\"token punctuation\">,</span> 0%<span class=\"token punctuation\">,</span> 0.2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--inlineCode-bg</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>255<span class=\"token punctuation\">,</span> 229<span class=\"token punctuation\">,</span> 100<span class=\"token punctuation\">,</span> 0.2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--inlineCode-text</span><span class=\"token punctuation\">:</span> #1a1a1a<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--form-shadow</span><span class=\"token punctuation\">:</span> 0 2px 15px 0 <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>210<span class=\"token punctuation\">,</span> 214<span class=\"token punctuation\">,</span> 220<span class=\"token punctuation\">,</span> 0.5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">body.dark</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">-webkit-font-smoothing</span><span class=\"token punctuation\">:</span> antialiased<span class=\"token punctuation\">;</span>\n\n  <span class=\"token property\">--bg</span><span class=\"token punctuation\">:</span> #282c35<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--bg-secondary</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>54<span class=\"token punctuation\">,</span> 60<span class=\"token punctuation\">,</span> 72<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--header</span><span class=\"token punctuation\">:</span> #ffffff<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--textNormal</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>255<span class=\"token punctuation\">,</span> 255<span class=\"token punctuation\">,</span> 255<span class=\"token punctuation\">,</span> 0.88<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--textTitle</span><span class=\"token punctuation\">:</span> #ffffff<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--textLink</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--pink<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--hr</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsla</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> 0%<span class=\"token punctuation\">,</span> 100%<span class=\"token punctuation\">,</span> 0.2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--inlineCode-bg</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>115<span class=\"token punctuation\">,</span> 124<span class=\"token punctuation\">,</span> 153<span class=\"token punctuation\">,</span> 0.2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--inlineCode-text</span><span class=\"token punctuation\">:</span> #ffee93<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--form-shadow</span><span class=\"token punctuation\">:</span> 0 2px 15px 0 <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>26<span class=\"token punctuation\">,</span> 26<span class=\"token punctuation\">,</span> 27<span class=\"token punctuation\">,</span> 0.637<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>最终效果就是这样\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 111.14245416078985%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAADX0lEQVQ4y4VV25baRhDkT7IOy0WIu5AQEpLQBQnBml0W73pzc5y8JHlOPirn+Av8deXqlkTIiWM/FD3TM+rp6a4aWv2hjcF4iZ65UGtOXIhP5mK/hGaP2Jv2EH3algR5+eFXvHn7Dq8fXvDT+9/gRwVu+3MYI/vrQQcLmFMbz7/8gd7QQas5YcjMJLhAfB3DQnfwdXSMOQYTC+X5xyqgBAuTAlM7uFx5OFthNPcJj6e7xOpih/V4NPMwsXyMuWc089HuTjSxlsEgHz7+jd//+hPLVYo4OSDfHlEWD4p4s8dmUyKJ90i4FsUlMlpvvcUqqOCuMz1AA/ZMG16SY+5GWCw3sO0Qvr1ReGKdGKtFpGOPY2sRYO0kMEcO2v2ZXlnQNKglnWn3qoWmLreDeQ3rylbjZv1zLNAMZWDy2gZP7HCzOM0Rm8O5+AY1DO4z6g+NL9CoNWSw5+0Zp+QBj+kDTsT7w/fI/AL3yT3e7b/Dz5yPxu7lag2aGzVzvbJkEZB3fpBjwfrNrQAza40JuyxUmkg3Z54WfcTumzW9zMkS49qvN6nFQWI7iNIDNtkd4u1rJPkRxf4RKa0X5kiLe6w3O/WpvziSZnvdr98RayYkDZVsVSkxF7c70uTurB9FpMWc2S69tNrsbnQscP0MjpeoTzg4ZdftVaz8rGnDJvAqQy4KJ4W8Xfpe9aa4IVm/6YzV3nTHitsrqlyr5Z8aUi6OFSrPXPJtOvVgs45LO0LgpopolakNac1amtc6b8aaoWw452c8755w2NwpaSM3q7ocH3FOT3jJ3+CJTHjaPmJISjXZNXpv5hWxGX0V5XDZgIUXU5/sMHU9W0ZaivFireUYUL9TJ9SajckAqbGCPqmh+HrN8+WHhTZmdzjj7v4t8vKkXRZ7OD4hoJZlXZoWUtPF4fHChIYB0ijtsqTpkYOyKBQo9id2dgeLGWakjAhf/DIWyOERaSOPgvDvP0qRH9Fmx6zq0TZmF3zbr6B6Zp0qfzXuXynmX0oRnR4iNmOZaCfLiM9XUGIX8mpEyuYUwR577inoL8ODrnX/73GQgGlUwvcyTPlQyhPlM7hA6CJWKOSSVnKgPGfOIvxsdhVtqEmX9Vjz4QwIZ01FsG4Cm4UW6wbVXNbkup2aIoP6lbr+w/oEo57RHblBgTcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/e55c0f6abb9c755e3b9ccf32c7d689fe/799d3/result.png\"\n        srcset=\"/static/e55c0f6abb9c755e3b9ccf32c7d689fe/00d96/result.png 148w,\n/static/e55c0f6abb9c755e3b9ccf32c7d689fe/0b23c/result.png 295w,\n/static/e55c0f6abb9c755e3b9ccf32c7d689fe/799d3/result.png 590w,\n/static/e55c0f6abb9c755e3b9ccf32c7d689fe/2a3d6/result.png 885w,\n/static/e55c0f6abb9c755e3b9ccf32c7d689fe/ae92f/result.png 1180w,\n/static/e55c0f6abb9c755e3b9ccf32c7d689fe/16518/result.png 1418w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h1>部署</h1>\n<ol>\n<li>安装 gh-pages</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gh-pages --save-dev</code></pre></div>\n<ol start=\"2\">\n<li>配置部署脚本</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby build &amp;&amp; gh-pages -d public -b master\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"3\">\n<li>推送源码到 dev 分支</li>\n</ol>\n<p>Github Pages 有个特殊的规则，就是 &#x3C;username>.github.io 会默认使用 <code class=\"language-text\">master</code> 分支中的生产代码。这也就是为什么 <code class=\"language-text\">gh-pages -d public -b master</code> 中是指定 <code class=\"language-text\">master</code>，而不是 <code class=\"language-text\">gh-pages</code>。</p>\n<p>因此，源码就需要放到非 <code class=\"language-text\">master</code> 分支上。我把博客的源码推到 <code class=\"language-text\">dev</code> 分支，并将其设置为默认。\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.3767926988266%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABF0lEQVQoz53RfU+DMBAGcL7/JzMxajRGg4w5Rss2XkZZ6aCF9vG4xUXN/pLkl3uAuwuh0SpdQUiJOElwbFv85wohXEXqZNEbh67tYLTBbCdM1rGZuMFSnpil7EbHOPM7RxtxFcWqQULSeouk/KSaE0E5JwIfhwxZW2BzFEirDOsmR6YKeiaxppmlKq/RBo0xOEQvNsazeceDfiOveDQb3PeSCNx1Ak+DxAo0zAqu6R9JyBGHDC0tjkS1gx4NLG2/sBi95TrMI87TwPec2ZIvPd+WueXrJj8j2m4FpNxhvz+gLCtUZc11V+xRVw0U/dtOnUgH1WnU2qMz/vbheDoUcz5D9/0vvTE46R7OOW703vMJ+h/CDUvfF+bYGlH3wdUvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/e9b3da86e9e000edddf377dc6bf543c6/799d3/github_pages_setting.png\"\n        srcset=\"/static/e9b3da86e9e000edddf377dc6bf543c6/00d96/github_pages_setting.png 148w,\n/static/e9b3da86e9e000edddf377dc6bf543c6/0b23c/github_pages_setting.png 295w,\n/static/e9b3da86e9e000edddf377dc6bf543c6/799d3/github_pages_setting.png 590w,\n/static/e9b3da86e9e000edddf377dc6bf543c6/2a3d6/github_pages_setting.png 885w,\n/static/e9b3da86e9e000edddf377dc6bf543c6/ae92f/github_pages_setting.png 1180w,\n/static/e9b3da86e9e000edddf377dc6bf543c6/bd983/github_pages_setting.png 1534w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<ol start=\"4\">\n<li>推送构建后的生产代码</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> run deploy</code></pre></div>\n<p>推送后应该稍微等一下，就可以访问个人网站了。</p>\n<h1>总结</h1>\n<p>Gastby 优势</p>\n<ul>\n<li>相当的灵活，给个人网站巨大的修改空间</li>\n<li>支持 graphql，数据调用方便</li>\n<li>生态强大，1500+ 数量的插件基本满足大部分需求</li>\n</ul>\n<p>Gastby 劣势</p>\n<ul>\n<li>因其灵活，对个人博客的友好度就没那么高，md 文件及文件夹需要自己建立。不像 hexo 可以 <code class=\"language-text\">hexo new [layout] &lt;title&gt;</code> 这么方便</li>\n</ul>\n<p>总体来说，我对 Gatsby 还挺满意的。要是大家挖掘到好玩的插件、好看的主题也欢迎留言。\n最后，也欢迎大家互换友链 ➡️<a href=\"https://sasuke40.github.io/\">Edward Elric</a></p>","frontmatter":{"title":"使用 Gatsby 搭建个人网站指南","date":"2020-01-07T00:00:00.000Z"}}},"pageContext":{"slug":"/a-guide-to-building-a-personal-website-with-gatsby/","previous":{"fields":{"slug":"/review-2019/"},"frontmatter":{"title":"2019 年回顾总结"}},"next":null}}}